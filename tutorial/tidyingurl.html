<!DOCTYPE html>
<html>
<head>
    <title>Tidying Up the Url</title>
    <link href="codemirror.css" rel="stylesheet" />
    <link href="tutorial.css" rel="stylesheet" />
    <style>
        .CodeMirror { height:410px; }
    </style>
</head>
<body>
    <div id="header">
        <div id="banner">Navigation</div>
    </div>
    <div id="content">
        <div id="tutorial">
            <h3>Exercises</h3>
            <ol>
                <li><a id="e1">Configuring States</a></li>
                <li><a id="e2">Accessing States</a></li>
                <li><a id="e3">Navigating to a Dialog</a></li>
                <li><a id="e4">Creating a State Controller</a></li>
                <li><a id="e5">Configuring a Transition</a></li>
                <li><a id="e6">Navigating along a Transition</a></li>
                <li><a id="e7">Navigating Back</a></li>
                <li><a id="e8">Passing Data</a></li>
                <li><a id="e9">Refreshing</a></li>
                <li><a id="e10">Remembering Data</a></li>
                <li><a id="e11">Tidying Up the Url</a></li>
            </ol>
        </div>
        <div id="exercise">
            <h1>Exercise 11: Tidying Up the Url</h1>
            <p>
                If you've been keeping your eyes peeled, you would've noticed the url change as you ran the Exercises. Navigation
                keeps the url in step with the current State and data. At the end of the previous Exercise the url's hash was set
                to '/people?c1=0-1&pageNumber=22_2&c3=4_0-05_pageNumber1_22_2'. In this Exercise we'll tidy this up so it reads
                '/people/2' instead.
            </p>
            <p>
                Most of the query string can be removed by turning off breadcrumb trail tracking on the listing State. It's safe
                to turn it off because you don't need to navigate back from the listing State. You can tidy up the rest of the url
                by changing the listing State's route and setting a default value for pageNumber. Make sure you check the url after
                successfully completing this Exercise.
            </p>
            <h2>Congratulations!</h2>
            <p>
                You've finished the tutorial. Before you start using Navigation you should know about Navigation plugins. These
                plugins bridge the gap between your UI binding library of choice and the Navigation library. They let you use the
                binding syntax you're familiar with to build navigation Hyperlinks. Here's a Hyperlink that navigates back from
                the details State to the listing State using the React Navigation plugin:
                &lt;NavigationBackLink distance="1"&gt;People&lt;/NavigationLink&gt;
                There are currently plugins for Angular, Knockout and React. To see them in action I've built the SPA from this
                tutorial using each of these libraries.
                <ul>
                    <li><a href="">Angular SPA Example</a></li>
                    <li><a href="">Knockout SPA Example</a></li>
                    <li><a href="">React SPA Example</a></li>
                </ul>
                If you've got any questions about this tutorial or would like to write a plugin for your UI library, get in
                touch <a href="https://twitter.com/grahammendick">@grahammendick.</a>
            </p>
            <textarea id="code"></textarea>
            <button id="run">Run</button>
            <button id="cheat">Cheat</button>
            <button id="next">Next</button>
        </div>
    </div>
    <script>
        var tutorial = {
            part: 11,
            exercise:
"function(result){\n\
	/*-------------------------EXERCISE-------------------------\n\
	 * Tidy up the listing State's url. 'trackCrumbTrail' has \n\
	 * already been set to false for you to turn off breadcrumb\n\
	 * trail tracking. Set the listing State's route and the\n\
	 * pageNumber's default value. Use the details State\n\
	 * configuration as an example.\n\
	 */\n\
	var dialogs = [{\n\
		key: 'z', initial: 'x', states: [\n\
			{ key: 'x', route: '?', \n\
				defaults: { ? }, \n\
				trackCrumbTrail: false, transitions: [\n\
				{ key: 't', to: 'y' }\n\
			]},\n\
    		{ key: 'y', route: 'person/{id}', \n\
				defaults: { id: 0 } }\n\
		]\n\
	}];\n\
	Navigation.StateInfoConfig.build(dialogs);\n\
	Navigation.StateController.navigate('z');\n\
	Navigation.StateController.refresh({ pageNumber: 2 });\n\
	Navigation.StateController.navigate('t');\n\
	Navigation.StateController.navigateBack(1);\n\
}",
            answer:
"function(result){\n\
	var dialogs = [{\n\
		key: 'z', initial: 'x', states: [\n\
			{ key: 'x', route: 'people/{pageNumber}', \n\
				defaults: { pageNumber: 0 }, \n\
				trackCrumbTrail: false, transitions: [\n\
				{ key: 't', to: 'y' }\n\
			]},\n\
    		{ key: 'y', route: 'person/{id}', \n\
				defaults: { id: 0 } }\n\
		]\n\
	}];\n\
	Navigation.StateInfoConfig.build(dialogs);\n\
	Navigation.StateController.navigate('z');\n\
	Navigation.StateController.refresh({ pageNumber: 2 });\n\
	Navigation.StateController.navigate('t');\n\
	Navigation.StateController.navigateBack(1);\n\
}"
        }
    </script>
    <script src="navigation.js"></script>
    <script src="codemirror.js"></script>
    <script src="javascript.js"></script>
    <script src="tutorial.js"></script>
</body>
</html>
