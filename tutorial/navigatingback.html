<!DOCTYPE html>
<html>
<head>
    <title>Navigating Back</title>
    <meta name="viewport" content="width=device-width">
    <link href="codemirror.css" rel="stylesheet" />
    <link href="tutorial.css" rel="stylesheet" />
    <style>
        .CodeMirror { height:410px; }
    </style>
</head>
<body>
    <div id="header">
        <div id="banner">
            <a id="home" href="../index.html">Navigation</a>
            <a class="active" href="configuringstates.html">Tutorial</a>
            <a href="../example/angular/navigation.html">Examples</a>
            <a href="../download/index.html">Download</a>
            <a href="../documentation/configuring.html">Documentation</a>
            <a href="https://github.com/grahammendick/navigation">GitHub Source</a>
        </div>
    </div>
    <div id="content">
        <div id="tutorial">
            <h3>Exercises</h3>
            <ol>
                <li><a id="e1">Configuring States</a></li>
                <li><a id="e2">Accessing States</a></li>
                <li><a id="e3">Navigating to a Dialog</a></li>
                <li><a id="e4">Creating a State Navigator</a></li>
                <li><a id="e5">Configuring a Transition</a></li>
                <li><a id="e6">Navigating along a Transition</a></li>
                <li><a id="e7">Navigating Back</a></li>
                <li><a id="e8">Passing Data</a></li>
                <li><a id="e9">Refreshing</a></li>
                <li><a id="e10">Remembering Data</a></li>
                <li><a id="e11">Tidying Up the Url</a></li>
            </ol>
        </div>
        <div id="exercise">
            <h1>Exercise 7: Navigating Back</h1>
            <p>
                After the user's edited a person's details, they'll want to return to the listing State to select a different
                person. Navigation keeps track of the States the user's navigate through, building up a dynamic breadcrumb trail.
                You can navigate back along this trail to return to a previously visited State. Navigating back 1 State would
                return the user to the listing State from the details State.
            </p>
            <textarea id="code"></textarea>
            <button id="run">Run</button>
            <button id="cheat">Cheat</button>
            <button id="next">Next</button>
        </div>
    </div>
    <script>
        var tutorial = {
            part: 7,
            exercise:
"function(result){\n\
	Navigation.StateInfoConfig.build([{\n\
		key: '{dialog}', initial: '{listing}', states: [\n\
			{ key: '{listing}', route: 'people', transitions: [\n\
				{ key: '{transition}', to: '{details}' }\n\
			]},\n\
    		{ key: '{details}', route: 'person' }\n\
		]\n\
	}]);\n\
	var dialogs = Navigation.StateInfoConfig.dialogs;\n\
	var dialog = dialogs.{dialog};\n\
	dialog.states.{listing}.navigated = function(){\n\
		result.navigated = true;\n\
	}\n\
	/*-------------------------EXERCISE-------------------------\n\
	 * Navigate back from the details State to the listing\n\
	 * State. Replace the first blank by navigating along the\n\
	 * Transition to reach the details State. Replace the\n\
	 * second blank with the number of States to go back to\n\
	 * return to the listing State.\n\
	 */\n\
	Navigation.StateController.navigate('{dialog}');\n\
	?\n\
	Navigation.StateController.navigateBack(?);\n\
}",
            answer:
"function(result){\n\
	Navigation.StateInfoConfig.build([{\n\
		key: '{dialog}', initial: '{listing}', states: [\n\
			{ key: '{listing}', route: 'people', transitions: [\n\
				{ key: '{transition}', to: '{details}' }\n\
			]},\n\
    		{ key: '{details}', route: 'person' }\n\
		]\n\
	}]);\n\
	var dialogs = Navigation.StateInfoConfig.dialogs;\n\
	var dialog = dialogs.{dialog};\n\
	dialog.states.{listing}.navigated = function(){\n\
		result.navigated = true;\n\
	}\n\
	Navigation.StateController.navigate('{dialog}');\n\
	Navigation.StateController.navigate('{transition}');\n\
	Navigation.StateController.navigateBack(1);\n\
}",
            test: function (listing, details) {
                if (Navigation.StateContext.state !== listing)
                    throw "The current State isn't the listing State";
                if (Navigation.StateContext.previousState !== details)
                    throw "You haven't navigated back from the details State";
            }
        }
    </script>
    <script src="../navigation.js"></script>
    <script src="codemirror.js"></script>
    <script src="javascript.js"></script>
    <script src="tutorial.js"></script>
</body>
</html>
