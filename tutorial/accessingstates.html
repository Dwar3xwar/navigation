<!DOCTYPE html>
<html>
<head>
    <title>Accessing States</title>
    <link href="codemirror.css" rel="stylesheet" />
    <link href="tutorial.css" rel="stylesheet" />
    <style>
        .CodeMirror { height:295px; }
    </style>
</head>
<body>
    <div id="header">
        <div id="banner">
            <a id="home" href="../index.html">Navigation</a>
            <a class="active" href="configuringstates.html">Tutorial</a>
            <a href="../example/angular/navigation.html">Examples</a>
            <a href="../download/index.html">Download</a>
            <a href="https://github.com/grahammendick/navigation">GitHub Source</a>
        </div>
    </div>
    <div id="content">
        <div id="tutorial">
            <h3>Exercises</h3>
            <ol>
                <li><a id="e1">Configuring States</a></li>
                <li><a id="e2">Accessing States</a></li>
                <li><a id="e3">Navigating to a Dialog</a></li>
                <li><a id="e4">Creating a State Navigator</a></li>
                <li><a id="e5">Configuring a Transition</a></li>
                <li><a id="e6">Navigating along a Transition</a></li>
                <li><a id="e7">Navigating Back</a></li>
                <li><a id="e8">Passing Data</a></li>
                <li><a id="e9">Refreshing</a></li>
                <li><a id="e10">Remembering Data</a></li>
                <li><a id="e11">Tidying Up the Url</a></li>
            </ol>
        </div>
        <div id="exercise">
            <h1>Exercise 2: Accessing States</h1>
            <p>
                If you've used a router before you've probably encountered a route handler. It's a function that's associated
                with a route and runs when that route is activated. Navigation has State navigators in place of route handlers.
                They serve the same purpose, except they're attached to States instead of routes.
            </p>
            <p>
                It would be too limiting to have to define the listing navigator at the same time as you created the listing
                State. Navigation provides access to the States after they've been configured and built so you can create the
                navigator at the same time as you create your listing view model. You access the States through their parent
                Dialog. In this exercise, you'll familiarise yourself with this access code. This will pave the way for creating
                State navigators in later exercises.
            </p>
            <textarea id="code"></textarea>
            <button id="run">Run</button>
            <button id="cheat">Cheat</button>
            <button id="next">Next</button>
        </div>
    </div>
    <script>
        var tutorial = {
            part: 2,
            exercise:
"function(result){\n\
	Navigation.StateInfoConfig.build([{\n\
		key: '{dialog}', initial: '{listing}', states: [\n\
			{ key: '{listing}', route: 'people' },\n\
    		{ key: '{details}', route: 'person' }\n\
		]\n\
	}]);\n\
	/*-------------------------EXERCISE-------------------------\n\
	 * Complete the Dialog and listing State access code below\n\
	 * by filling in the two missing properties. The property\n\
	 * names must match the names you've configured above. \n\
	 */\n\
	var dialogs = Navigation.StateInfoConfig.dialogs;\n\
	var masterDetails = dialogs.?;\n\
	result.listing = masterDetails.states.?;\n\
	result.details = masterDetails.states.{details};\n\
}",
            answer:
"function(result){\n\
	Navigation.StateInfoConfig.build([{\n\
		key: '{dialog}', initial: '{listing}', states: [\n\
			{ key: '{listing}', route: 'people' },\n\
    		{ key: '{details}', route: 'person' }\n\
		]\n\
	}]);\n\
	var dialogs = Navigation.StateInfoConfig.dialogs;\n\
	var masterDetails = dialogs.{dialog};\n\
	result.listing = masterDetails.states.{listing};\n\
	result.details = masterDetails.states.{details};\n\
}",
            test: function (listing, details, result) {
                if (listing !== result.listing)
                    throw "'result.listing' doesn't match the listing State";
                if (details !== result.details)
                    throw "'result.details' doesn't match the details State";
            }
        }
    </script>
    <script src="../navigation.js"></script>
    <script src="codemirror.js"></script>
    <script src="javascript.js"></script>
    <script src="tutorial.js"></script>
</body>
</html>
