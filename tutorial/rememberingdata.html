<!DOCTYPE html>
<html>
<head>
    <title>Remembering Data</title>
    <link href="codemirror.css" rel="stylesheet" />
</head>
<body>
    <h1>Exercise 10: Remembering Data</h1>
    <p>
        The user's selected a person from the second page. After they've edited that person, they navigate back to the 
        listing State to select the next person. They'd be disappointed if you didn't return them to the second page so 
        they could continue where they left off. When Navigation builds its dynamic breadcrumb trail it tracks the data 
        along with the State. When you navigate back this data is passed back into your State controller. In this Exercise, 
        you'll see the pageNumber is remembered when returning to the listing State from the details State.
    </p>
    <textarea id="code"></textarea>
    <button id="run">Run</button>
    <button id="cheat">Cheat</button>
    <script>
        var tutorial = {
            exercise:
"function(result){\n\
	var dialogs = [{\n\
		key: 'z', initial: 'x', states: [\n\
			{ key: 'x', route: 'people', transitions: [\n\
				{ key: 't', to: 'y' }\n\
			]},\n\
    		{ key: 'y', route: 'person' }\n\
		]\n\
	}];\n\
	Navigation.StateInfoConfig.build(dialogs);\n\
	var dialogs = Navigation.StateInfoConfig.dialogs;\n\
	var dialog = dialogs.z;\n\
	dialog.states.x.navigated = function(data){\n\
		result.pageNumber = data.pageNumber;\n\
	}\n\
	/*-------------------------EXERCISE-------------------------\n\
	 * Navigate back to keep the pageNumber the user was on when\n\
	 * they navigated to the details State. Fill in the blanks:\n\
	 * 1. Navigate to the listing State.\n\
	 * 2. Refresh the listing State, passing a pageNumber of 2.\n\
	 * 3. Navigate to the details State.\n\
	 * 4. Navigate back to the listing State.\n\
	 */\n\
	 ?\n\
	 ?\n\
	 ?\n\
	 ?\n\
}",
            answer:
"function(result){\n\
	var dialogs = [{\n\
		key: 'z', initial: 'x', states: [\n\
			{ key: 'x', route: 'people', transitions: [\n\
				{ key: 't', to: 'y' }\n\
			]},\n\
    		{ key: 'y', route: 'person' }\n\
		]\n\
	}];\n\
	Navigation.StateInfoConfig.build(dialogs);\n\
	var dialogs = Navigation.StateInfoConfig.dialogs;\n\
	var dialog = dialogs.z;\n\
	dialog.states.x.navigated = function(data){\n\
		result.pageNumber = data.pageNumber;\n\
	}\n\
	Navigation.StateController.navigate('z');\n\
	Navigation.StateController.refresh({ pageNumber: 2 });\n\
	Navigation.StateController.navigate('t');\n\
	Navigation.StateController.navigateBack(1);\n\
}"
        }
    </script>
    <script src="codemirror.js"></script>
    <script src="javascript.js"></script>
    <script src="tutorial.js"></script>
    <script src="navigation.js"></script>
</body>
</html>
