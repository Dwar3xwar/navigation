<!DOCTYPE html>
<html>
<head>
    <title>Creating a State Navigator</title>
    <link href="codemirror.css" rel="stylesheet" />
    <link href="tutorial.css" rel="stylesheet" />
    <style>
        .CodeMirror { height:335px; }
    </style>
</head>
<body>
    <div id="header">
        <div id="banner">
            <a id="home" href="../index.html">Navigation</a>
            <a class="active" href="configuringstates.html">Tutorial</a>
            <a href="../example/angular/navigation.html">Examples</a>
            <a href="../download/index.html">Download</a>
            <a href="https://github.com/grahammendick/navigation">GitHub Source</a>
        </div>
    </div>
    <div id="content">
        <div id="tutorial">
            <h3>Exercises</h3>
            <ol>
                <li><a id="e1">Configuring States</a></li>
                <li><a id="e2">Accessing States</a></li>
                <li><a id="e3">Navigating to a Dialog</a></li>
                <li><a id="e4">Creating a State Navigator</a></li>
                <li><a id="e5">Configuring a Transition</a></li>
                <li><a id="e6">Navigating along a Transition</a></li>
                <li><a id="e7">Navigating Back</a></li>
                <li><a id="e8">Passing Data</a></li>
                <li><a id="e9">Refreshing</a></li>
                <li><a id="e10">Remembering Data</a></li>
                <li><a id="e11">Tidying Up the Url</a></li>
            </ol>
        </div>
        <div id="exercise">
            <h1>Exercise 4: Creating a State Navigator</h1>
            <p>
                State navigators are Navigation's equivalent of route Handlers. A State navigator is a function attached
                to a State's navigated property that is called when that State is navigated to. It lets you do any setup work
                needed by your view. In a listing State navigator you'd fetch the first page of people and bind them to the
                grid. In this exercise, you'll create a listing State navigator and demonstrate it's called after navigating
                to the Dialog.
            </p>
            <textarea id="code"></textarea>
            <button id="run">Run</button>
            <button id="cheat">Cheat</button>
            <button id="next">Next</button>
        </div>
    </div>
    <script>
        var tutorial = {
            part: 4,
            exercise:
"function(result){\n\
	Navigation.StateInfoConfig.build([{\n\
		key: '{dialog}', initial: '{listing}', states: [\n\
			{ key: '{listing}', route: 'people' },\n\
    		{ key: '{details}', route: 'person' }\n\
		]\n\
	}]);\n\
	var dialogs = Navigation.StateInfoConfig.dialogs;\n\
	var dialog = dialogs.{dialog};\n\
	/*-------------------------EXERCISE-------------------------\n\
	 * Create a listing State navigator by replacing the blank\n\
	 * with a function. Set 'result.navigated = true;' in the \n\
	 * body of the function to verify your navigator's called\n\
	 * when the listing State is subsequently navigated to.\n\
	 */\n\
	result.navigated = false;\n\
	dialog.states.{listing}.navigated = ?;\n\
	Navigation.StateController.navigate('{dialog}');\n\
}",
            answer:
"function(result){\n\
	Navigation.StateInfoConfig.build([{\n\
		key: '{dialog}', initial: '{listing}', states: [\n\
			{ key: '{listing}', route: 'people' },\n\
    		{ key: '{details}', route: 'person' }\n\
		]\n\
	}]);\n\
	var dialogs = Navigation.StateInfoConfig.dialogs;\n\
	var dialog = dialogs.{dialog};\n\
	result.navigated = false;\n\
	dialog.states.{listing}.navigated = function(){\n\
		result.navigated = true;\n\
	};\n\
	Navigation.StateController.navigate('{dialog}');\n\
}",
            test: function (listing, details, result) {
                if (!result.navigated)
                    throw "'result.navigated' isn't set to true";
            }
        }
    </script>
    <script src="../navigation.js"></script>
    <script src="codemirror.js"></script>
    <script src="javascript.js"></script>
    <script src="tutorial.js"></script>
</body>
</html>
