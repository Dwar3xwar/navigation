<!DOCTYPE html>
<html>
<head>
    <title>Navigating along a Transition</title>
    <link href="codemirror.css" rel="stylesheet" />
    <link href="tutorial.css" rel="stylesheet" />
    <style>
        .CodeMirror { height:410px; }
    </style>
</head>
<body>
    <div id="header">
        <div id="banner">
            <a id="home" href="../index.html">Navigation</a>
            <a class="active" href="configuringstates.html">Tutorial</a>
            <a href="../example/angular/navigation.html">Examples</a>
            <a href="https://github.com/grahammendick/navigation">GitHub Source</a>
        </div>
    </div>
    <div id="content">
        <div id="tutorial">
            <h3>Exercises</h3>
            <ol>
                <li><a id="e1">Configuring States</a></li>
                <li><a id="e2">Accessing States</a></li>
                <li><a id="e3">Navigating to a Dialog</a></li>
                <li><a id="e4">Creating a State Controller</a></li>
                <li><a id="e5">Configuring a Transition</a></li>
                <li><a id="e6">Navigating along a Transition</a></li>
                <li><a id="e7">Navigating Back</a></li>
                <li><a id="e8">Passing Data</a></li>
                <li><a id="e9">Refreshing</a></li>
                <li><a id="e10">Remembering Data</a></li>
                <li><a id="e11">Tidying Up the Url</a></li>
            </ol>
        </div>
        <div id="exercise">
            <h1>Exercise 6: Navigating along a Transition</h1>
            <p>
                Now that the Transition's configured, you can navigate along it. You do this in the same way as navigating to
                a Dialog, but passing in the Transition name instead of the Dialog name. If the current State isn't the listing
                State then you can't navigate along its Transition. So this Exercise navigates to the Dialog immediately before
                asking you to navigate along the Transition. In your SPA for real, these two navigations occur separately.
                Navigating to the Dialog happens when the user starts your SPA and navigating along the Transition when the user
                selects a person from the list.
            </p>
            <textarea id="code"></textarea>
            <button id="run">Run</button>
            <button id="cheat">Cheat</button>
            <button id="next">Next</button>
        </div>
    </div>
    <script>
        var tutorial = {
            part: 6,
            exercise:
"function(result){\n\
	var dialogs = [{\n\
		key: '{dialog}', initial: '{listing}', states: [\n\
			{ key: '{listing}', route: 'people', transitions: [\n\
				{ key: '{transition}', to: '{details}' }\n\
			]},\n\
    		{ key: '{details}', route: 'person' }\n\
		]\n\
	}];\n\
	Navigation.StateInfoConfig.build(dialogs);\n\
	var dialogs = Navigation.StateInfoConfig.dialogs;\n\
	var dialog = dialogs.{dialog};\n\
	dialog.states.{details}.navigated = function(){\n\
		result.navigated = true;\n\
	}\n\
	/*-------------------------EXERCISE-------------------------\n\
	 * Navigate along the listing State's Transition. Replace\n\
	 * the question mark below with a call to the 'navigate'\n\
	 * function on the StateController. Pass in the name you\n\
	 * gave to the Transition. This will navigate to the details\n\
	 * State and call its State controller above.\n\
	 */\n\
	 Navigation.StateController.navigate('{dialog}');\n\
	 ?\n\
}",
            answer:
"function(result){\n\
	var dialogs = [{\n\
		key: '{dialog}', initial: '{listing}', states: [\n\
			{ key: '{listing}', route: 'people', transitions: [\n\
				{ key: '{transition}', to: '{details}' }\n\
			]},\n\
    		{ key: '{details}', route: 'person' }\n\
		]\n\
	}];\n\
	Navigation.StateInfoConfig.build(dialogs);\n\
	var dialogs = Navigation.StateInfoConfig.dialogs;\n\
	var dialog = dialogs.{dialog};\n\
	dialog.states.{details}.navigated = function(){\n\
		result.navigated = true;\n\
	}\n\
	Navigation.StateController.navigate('{dialog}');\n\
	Navigation.StateController.navigate('{transition}');\n\
}",
            test: function (listing, details) {
                if (Navigation.StateContext.state !== details)
                    throw "The current State isn't the details State";
                if (Navigation.StateContext.previousState !== listing)
                    throw "The previous State isn't the listing State";
            }
        }
    </script>
    <script src="navigation.js"></script>
    <script src="codemirror.js"></script>
    <script src="javascript.js"></script>
    <script src="tutorial.js"></script>
</body>
</html>
