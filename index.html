<html>
<head>
    <title>Navigation</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/prism.css">
    <link rel="stylesheet" href="css/navigation.css">
</head>
<body>
    <div id="banner">
        <div>
            <a href="index.html" class="selected">Navigation</a>
            <a href="documentation/hello-world.html">Docs</a>
            <a href="download/index.html">Download</a>
            <a id="github" href="https://github.com/grahammendick/navigation">GitHub source</a>
        </div>
    </div>
    <div id="logo">
        <h1>Navigation</h1>
        <img alt="cursor hand" src="img/cursor.png" />
        <div>The data-first JavaScript router</div>
    </div>
    <div id="content" class="home">
        <div class="plug">
            <h2>Data First</h2>
            Other JavaScript routers have got it all back to front. They want you to configure your routes before you even know what data you're passing. With the Navigation router, you can delay your route configuration until after your application's up and running.
        </div>
        <div class="plug">
            <h2>Routes Last</h2>
            How can your application run if you haven't set any routes? The Navigation router generates interim routes and passes all data in the query string. At any time, you can configure the real routes and introduce route parameters without changing any code.
        </div>
        <h2>Try It Out</h2>
        <p>
            Take a look at this working application. It's a Hyperlink you can click to indicate whether you like something. It works even though there's no route configured yet. Click the toggle Hyperlink below then take a look at the browser Url. The Navigation router's generated an interim Url of '/?like=true1_1', but you can change it to '/example/true' without touching the code:
        </p>
        <ol>
            <li>Start by setting a route in the configuration below. Type the word 'example' in the route text box. As you type, watch the browser Url automatically update to '/example?like=true1_1'</li>
            <li>Next, change the 'like' indicator from a query string to a route parameter. Update the route text box to 'example/{like}'. Keep your eye on the Url as it changes to '/example/true1_1'</li>
            <li>The Navigation router passes around the 'like' indicator as a boolean. It uses the trailing characters of the Url to keep track of the type. Tidy up the Url by configuring the type instead. Pick 'boolean' from the drop down below and watch the Url become 'example/true'</li>
        </ol>
        <p>
        </p>
        <div class="app">
            <pre><code class="language-jsx">var stateNavigator = new Navigation.StateNavigator([
  {key: 'example', </code><label for="route"><code class="language-jsx">route:</code></label><input id="route"/><code class="language-jsx">, </code><label for="defType"><code class="language-jsx">defaultTypes: {like:</code></label><select id="defType">
      <option value="string"></string>
      <option value="boolean">boolean</string>
  </select><code class="language-jsx">}}
]);

stateNavigator.states.example.navigated = function(data) {
  ReactDOM.render(
    &lt;NavigationReact.NavigationLink 
      stateKey="example"
      navigationData={{like: !data.like}}
      stateNavigator={stateNavigator}>
      You {data.like ? 'like' : 'haven\'t liked'} this. Click to toggle.
    &lt;/NavigationReact.NavigationLink>,
    document.getElementById('app'));
};

stateNavigator.start();</code></pre>
        </div>
        <div id="app"/>
    </div>
    <div id="footer">
        Thanks to <a href="https://www.browserstack.com/">BrowserStack</a> for their help with cross browser testing
    </div>
    <script src="js/prism.js"></script>
    <script src="https://npmcdn.com/react@15.3.0/dist/react.min.js"></script>
    <script src="https://npmcdn.com/react-dom@15.3.0/dist/react-dom.min.js"></script>
    <script src="download/navigation-4.0.0.js"></script>
    <script src="download/navigation.react-2.0.4.js"></script>
    <script>
var stateNavigator = new Navigation.StateNavigator([{ key: 'example', route: '' }]);

stateNavigator.states.example.navigated = function (data) {
    render(data);
};

stateNavigator.start(location.hash ? '/' : '');

document.getElementById('route').addEventListener('keyup', reconfigure);
document.getElementById('defType').addEventListener('change', reconfigure);

function reconfigure() {
    var navigationData = stateNavigator.stateContext.includeCurrentData({});
    try {
        stateNavigator.configure([
            {key: 'example', route: document.getElementById('route').value, defaultTypes: { 'like': document.getElementById('defType').value }}
        ]);
        stateNavigator.states.example.navigated = render;
        stateNavigator.navigate('example', navigationData);
    } catch(ex) {
        render(navigationData);
    }    
}

function render(data) {
    ReactDOM.render(React.createElement(
        NavigationReact.NavigationLink,
        {
            stateKey: 'example',
            navigationData: { like: !data.like },
            stateNavigator: stateNavigator },
        'You ',
        data.like ? 'like' : 'haven\'t liked',
        ' this. Click to toggle.'
    ), document.getElementById('app'));
};
    </script>
</body>
</html>