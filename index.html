<html>
<head>
    <title>Navigation</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="prism.css">
    <link rel="stylesheet" href="navigation.css">
</head>
<body>
    <div id="banner">
        <div>
            <a href="index.html" class="selected">Navigation</a>
            <a href="navigation.html">Docs</a>
            <a href="#">Tutorial</a>
            <a href="#">Download</a>
            <a id="github" href="#">GitHub source</a>
        </div>
    </div>
    <div id="logo">
        <h1>Navigation</h1>
        <img alt="cursor hand" src="cursor.png" />
        <div>The data-first JavaScript router</div>
    </div>
    <div id="content">
        <div class="plug">
            <h2>Data First</h2>
            You don't know your routes until the end. Don't configure until you know what data and
            type of data you're passing. Routes at the end...
        </div>
        <div class="plug">
            <h2>Typed Data</h2>
            Never turn data to or from a string. Pass numbers, booleans, dates and arrays in your Urls.
            Don't need any configuration to do this. Once you're happy with the data, add the configuration
            to tidy up the Urls...
        </div>
        <div class="plug">
            <h2>Routes Last</h2>
            Build any route you want, once you've got your data sorted. Any data can be turned into a route parameter
            without changing your app. You can even turn arrays into splats...
        </div>
        <h2>Try It Out</h2>
        <p>
            You don't know your routes until the end. Sort of hot loading for routing. Don't need to hot load,
            just need to leave them til the end. 
            sdfjlsdkfjsd <code>sld sdfj</code> lsdkjf sdfs dlksdlfepowrtojmv djvlmv.,cm dfvds f dfs
            dsfjsdklf.
            You don't know your routes until the end. sdfsdiklfjs lfksdjlfk sjdlkfjsdkl fjsldkjf klsdjf skldjf d
            sdfjlsdkfjsd kfjsdl kfdlkfj skldfj sld sdfj lsdkjf sdfs.
        </p>
        <div class="app">
            <pre><code class="language-jsx">var stateNavigator = new Navigation.StateNavigator([
  {key: 'example', </code><label for="route"><code class="language-jsx">route:</code></label><input id="route"/><code class="language-jsx">, </code><label for="defType"><code class="language-jsx">defaultTypes: {like:</code></label><select id="defType">
      <option value="string"></string>
      <option value="boolean">boolean</string>
  </select><code class="language-jsx">}}
]);

stateNavigator.states.example.navigated = function(data) {
  var text = data.like ? 'like' : 'haven\'t liked';
  ReactDOM.render(
    &lt;NavigationReact.NavigationLink 
      stateKey="example"
      navigationData={{like: !data.like}}
      stateNavigator={stateNavigator}>
      You {text} this. Click to toggle.
    &lt;/NavigationReact.NavigationLink>,
    document.getElementById('app'));
};

stateNavigator.start();</code></pre>
        </div>
        <div id="app"/>
    </div>
    <div id="footer">
        Thanks to <a href="https://www.browserstack.com/">BrowserStack</a> for their help with cross browser testing
    </div>
    <script type="text/javascript" src="prism.js"></script>
    <script type="text/javascript" src="example/react/react-0.14.3.min.js"></script>
    <script type="text/javascript" src="example/react/react-dom-0.14.3.min.js"></script>
    <script type="text/javascript" src="navigation.js"></script>
    <script type="text/javascript" src="navigation.react.js"></script>
    <script type="text/javascript">
'use strict';

var stateNavigator = new Navigation.StateNavigator([{ key: 'example', route: '' }]);

stateNavigator.states.example.navigated = function (data) {
    render(data);
};

stateNavigator.start('/');

document.getElementById('route').addEventListener('keyup', reconfigure);
document.getElementById('defType').addEventListener('change', reconfigure);

function reconfigure() {
    var navigationData = stateNavigator.stateContext.includeCurrentData({});
    try {
        stateNavigator.configure([
            {key: 'example', route: document.getElementById('route').value, defaultTypes: { 'like': document.getElementById('defType').value }}
        ]);
        stateNavigator.states.example.navigated = render;
        stateNavigator.navigate('example', navigationData);
    } catch(ex) {
        render(navigationData);
    }    
}

function render(data) {
    var text = data.like ? 'like' : 'haven\'t liked';
    ReactDOM.render(React.createElement(
        NavigationReact.NavigationLink,
        {
            stateKey: 'example',
            navigationData: { like: !data.like },
            stateNavigator: stateNavigator },
        'You ',
        text,
        ' this. Click to toggle.'
    ), document.getElementById('app'));
};
    </script>
</body>
</html>