/**
 * Navigation React Mobile v2.0.1
 * (c) Graham Mendick - http://grahammendick.github.io/navigation/
 * License: Apache-2.0
 */
var NavigationReactMobile=function(t,e,m,r){"use strict";var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function o(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},n=function(s){function t(t,e){var n=s.call(this,e||"")||this;return n.hash=!1,n.buildCurrentUrl=t,n.hash=void 0===e,n}return o(t,s),t.prototype.getHref=function(t){var e=t.indexOf("?");if(0<=e){for(var n=t.substring(0,e),r=t.substring(e+1).split("&"),a=[],o=0;o<r.length;o++)"crumb="!==r[o].substring(0,6)&&a.push(r[o]);var i=a.join("&");t=""+n+(i&&"?")+i}return this.hash?"#"+t:s.prototype.getHref.call(this,t)},t.prototype.getUrl=function(t){return this.hash?t.hash.substring(1):s.prototype.getUrl.call(this,t)},t.prototype.getCurrentUrl=function(){var t=this.getUrl(location);return this.buildCurrentUrl&&(t=this.buildCurrentUrl(t)),t},t}(e.HTML5HistoryManager),i=function(n){function f(t){var e=n.call(this,t)||this;return e.animate=e.animate.bind(e),e.state={items:[],restart:!1},e}return o(f,n),f.getDerivedStateFromProps=function(t,e){var n=e.items,r="undefined"!=typeof performance?performance.now():0,a=f.move(r,n,t);return{items:a.items,restart:a.moving}},f.prototype.componentDidMount=function(){this.animateId=requestAnimationFrame(this.animate)},f.prototype.componentDidUpdate=function(){!this.animateId&&this.state.restart&&(this.animateId=requestAnimationFrame(this.animate))},f.prototype.componentWillUnmount=function(){cancelAnimationFrame(this.animateId)},f.prototype.animate=function(o){var i=this;this.setState(function(t){var e=t.items,n=f.move(o,e,i.props),r=n.items,a=n.moving;return i.animateId=null,a&&(i.animateId=requestAnimationFrame(i.animate)),{items:r,restart:!1}})},f.move=function(s,t,e){var u=e.data,r=e.enter,l=e.leave,c=e.update,p=e.progress,a=e.getKey,m=e.duration,d=e.onRest,h=u.reduce(function(t,e,n){var r;return g({},t,((r={})[a(e)]=g({},e,{index:n}),r))},{}),n=t.reduce(function(t,e){var n;return g({},t,((n={})[e.key]=e,n))},{}),o=t.map(function(t,e){var n=h[t.key],r={key:t.key,data:n||t.data,tick:s};r.end=n?c(n):(l||c)(t.data),r.index=n?n.index:u.length+e;var a=f.areEqual(t.end,r.end);if(a){r.start=t.start,r.rest=1===t.progress;var o=(r.tick-t.tick)/m;r.progress=Math.min(t.progress+o,1)}else{r.rest=!1;var i=!a&&f.areEqual(t.start,r.end);r.start=i?t.end:p?t.start:t.style,r.progress=i?1-t.progress:p}return r.style=f.interpolateStyle(r),d&&r.rest&&!t.rest&&d(t.data),r}).filter(function(t){return h[t.key]||!t.rest&&l}).concat(u.filter(function(t){return!n[a(t)]}).map(function(t){var e=h[a(t)].index,n={key:a(t),data:t,tick:s,rest:!1,index:e};return n.start=n.style=r(t),n.end=c(t),n.progress=f.areEqual(n.start,n.end)?1:0,n})).sort(function(t,e){return t.index-e.index});return{items:o,moving:0!==o.filter(function(t){return!t.rest}).length}},f.areEqual=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0},f.interpolateStyle=function(t){var e=t.start,n=t.end,r=t.progress,a={};for(var o in n)a[o]=e[o]+r*(n[o]-e[o]);return a},f.prototype.render=function(){return this.props.children(this.state.items)},f.defaultProps={progress:0},f}(m.Component),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.shouldComponentUpdate=function(t){var e=t.navigationEvent,n=t.stateNavigator,r=e.stateNavigator.stateContext.crumbs.length;return n.stateContext.crumbs.length===r&&e!==this.props.navigationEvent},e.prototype.render=function(){return m.createElement(r.NavigationContext.Provider,{value:this.props.navigationEvent},this.props.children)},e}(m.Component),l=function(){function t(){this.sharedElements={}}return t.prototype.registerSharedElement=function(t,e,n,r){this.sharedElements[t]=this.sharedElements[t]||{},this.sharedElements[t][e]={ref:n,data:r}},t.prototype.unregisterSharedElement=function(t,e){this.sharedElements[t]&&(e?delete this.sharedElements[t][e]:delete this.sharedElements[t])},t.prototype.getSharedElements=function(t,e){if(t===e)return[];var n=this.sharedElements[e],r=this.sharedElements[t],a=[];for(var o in r)n&&n[o]&&a.push({name:o,oldElement:n[o],mountedElement:r[o]});return a},t}(),s=m.createContext(new l),u=function(n){return function(e){return m.createElement(r.NavigationContext.Consumer,null,function(t){return m.createElement(n,g({stateNavigator:t.stateNavigator,navigationEvent:t},e))})}},c=u(function(u){function t(t){var e,n=u.call(this,t)||this;n.sharedElementRegistry=new l;var r=n.props,a=r.navigationEvent,o=r.stateNavigator.stateContext,i=o.state,s=o.crumbs;return n.state={scenes:(e={},e[s.length]=i&&a,e),rest:!1},n}return o(t,u),t.getDerivedStateFromProps=function(t,e){var n,r=e.scenes,a=t.navigationEvent,o=t.stateNavigator.stateContext.crumbs;return r[o.length]===a?null:{scenes:g({},r,(n={},n[o.length]=a,n)),rest:!1}},t.prototype.getSharedElements=function(){var t=this.props.stateNavigator.stateContext,e=t.crumbs,n=t.oldUrl;if(null!==n&&!this.state.rest){var r=n.split("crumb=").length-1;return this.sharedElementRegistry.getSharedElements(e.length,r)}return[]},t.prototype.clearScene=function(s){var u=this;this.setState(function(t){var e,n=t.scenes,r=t.rest,a=u.getScenes().filter(function(t){return t.key===s})[0];a||u.sharedElementRegistry.unregisterSharedElement(s);var o=g({},n,((e={})[s]=a?n[s]:null,e)),i=r||a&&a.mount;return o[s]!==n[s]||i!==r?{scenes:o,rest:i}:null})},t.prototype.getScenes=function(){var t=this.props.stateNavigator.stateContext,e=t.crumbs,u=t.nextCrumb;return e.concat(u).map(function(t,e,n){var r=t.state,a=t.data,o=t.url,i=n.slice(0,e),s=n[e+1]||{state:void 0,data:void 0};return{key:e,state:r,data:a,url:o,crumbs:i,nextState:s.state,nextData:s.data,mount:o===u.url}})},t.prototype.getStyle=function(t,e){var n=e.state,r=e.data,a=e.crumbs,o=e.nextState,i=e.nextData,s=e.mount,u=this.props,l=u.unmountedStyle,c=u.mountedStyle,p=u.crumbStyle,m=t?s?c:p:l;return"function"==typeof m?m(n,r,a,o,i):m},t.prototype.render=function(){var u=this,t=this.props,l=t.children,e=t.duration,n=t.sharedElementMotion,c=t.stateNavigator,r=c.stateContext,p=r.crumbs,a=r.oldState;return c.stateContext.state&&m.createElement(s.Provider,{value:this.sharedElementRegistry},m.createElement(i,{data:this.getScenes(),getKey:function(t){return t.key},enter:function(t){return u.getStyle(!a,t)},update:function(t){return u.getStyle(!0,t)},leave:function(t){return u.getStyle(!1,t)},onRest:function(t){var e=t.key;return u.clearScene(e)},duration:e},function(t){return t.map(function(t){var e=t.data,n=e.key,r=e.state,a=e.data,o=t.style,i=u.state.scenes[n],s=i&&m.createElement(d,{navigationEvent:i,stateNavigator:c},r.renderScene(a));return l(o,s,n,p.length===n,r,a)}).concat(n&&n({key:"sharedElements",sharedElements:u.getSharedElements(),progress:t[p.length]&&t[p.length].progress,duration:e}))}))},t.defaultProps={duration:300},t}(m.Component)),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.componentDidMount=function(){this.register()},e.prototype.componentDidUpdate=function(t){var e=this.props,n=e.stateNavigator,r=e.sharedElementRegistry,a=n.stateContext.crumbs.length;r.unregisterSharedElement(a,t.name),this.register()},e.prototype.componentWillUnmount=function(){var t=this.props,e=t.stateNavigator,n=t.sharedElementRegistry,r=e.stateContext.crumbs.length;n.unregisterSharedElement(r,this.props.name)},e.prototype.register=function(){var t=this.props,e=t.unshare,n=t.name,r=t.data,a=t.stateNavigator,o=t.sharedElementRegistry,i=a.stateContext.crumbs.length;e?o.unregisterSharedElement(i,n):this.ref&&o.registerSharedElement(i,n,this.ref,r)},e.prototype.render=function(){var e=this;return m.cloneElement(this.props.children,{ref:function(t){return e.ref=t}})},e}(m.Component),h=u(function(e){return m.createElement(s.Consumer,null,function(t){return m.createElement(p,g({},e,{sharedElementRegistry:t}))})}),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.componentDidUpdate=function(t){var e=this.getSharedElements(t.sharedElements),n=this.getSharedElements(this.props.sharedElements);this.diff(e,n,this.props.onAnimated),this.diff(n,e,this.props.onAnimating)},e.prototype.diff=function(t,e,n){for(var r in t){var a=t[r],o=e[r];o&&a.mountedElement.ref===o.mountedElement.ref||(n&&n(r,a.oldElement.ref,a.oldElement.data),n&&n(r,a.mountedElement.ref,a.mountedElement.data))}},e.prototype.getSharedElements=function(t){return t.reduce(function(t,e){var n;return g({},t,((n={})[e.name]=e,n))},{})},e.prototype.getStyle=function(t,e){var n=e.ref,r=e.data,a=n.getBoundingClientRect(),o=a.top,i=a.left,s=a.width,u=a.height;return this.props.elementStyle(t,n,g({top:o,left:i,width:s,height:u},r))},e.prototype.getPropValue=function(t,e){return"function"==typeof t?t(e):t},e.prototype.render=function(){var r=this,t=this.props,e=t.sharedElements,u=t.children,n=t.progress,a=t.duration;return 0!==e.length&&m.createElement(i,{data:e,getKey:function(t){return t.name},enter:function(t){var e=t.name,n=t.oldElement;return r.getStyle(e,n)},update:function(t){var e=t.name,n=t.mountedElement;return r.getStyle(e,n)},progress:n<1?n:0,duration:a},function(t){return t.map(function(t){var e=t.data,n=e.name,r=e.oldElement,a=e.mountedElement,o=t.style,i=t.start,s=t.end;return u(o,n,g({},i,r.data),g({},s,a.data))})})},e.defaultProps={duration:300,elementStyle:function(t,e,n){return n}},e}(m.Component);return t.MobileHistoryManager=n,t.NavigationMotion=c,t.SharedElement=h,t.SharedElementMotion=f,t}({},Navigation,React,NavigationReact);