/**
 * Navigation React Mobile v2.1.0
 * (c) Graham Mendick - http://grahammendick.github.io/navigation/
 * License: Apache-2.0
 */
var NavigationReactMobile=function(t,e,p,a,n){"use strict";var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function i(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var v=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},r=function(s){function t(t,e){var r=s.call(this,e||"")||this;return r.hash=!1,r.buildCurrentUrl=t,r.hash=void 0===e,r}return i(t,s),t.prototype.getHref=function(t){var e=t.indexOf("?");if(0<=e){for(var r=t.substring(0,e),n=t.substring(e+1).split("&"),a=[],o=0;o<n.length;o++)"crumb="!==n[o].substring(0,6)&&a.push(n[o]);var i=a.join("&");t=""+r+(i&&"?")+i}return this.hash?"#"+t:s.prototype.getHref.call(this,t)},t.prototype.getUrl=function(t){return this.hash?t.hash.substring(1):s.prototype.getUrl.call(this,t)},t.prototype.getCurrentUrl=function(){var t=this.getUrl(location);return this.buildCurrentUrl&&(t=this.buildCurrentUrl(t)),t},t}(e.HTML5HistoryManager),m=function(r){function f(t){var e=r.call(this,t)||this;return e.animate=e.animate.bind(e),e.state={items:[],restart:!1},e}return i(f,r),f.getDerivedStateFromProps=function(t,e){var r=e.items,n="undefined"!=typeof performance?performance.now():0,a=f.move(n,r,t);return{items:a.items,restart:a.moving}},f.prototype.componentDidMount=function(){this.animateId=requestAnimationFrame(this.animate)},f.prototype.componentDidUpdate=function(){!this.animateId&&this.state.restart&&(this.animateId=requestAnimationFrame(this.animate))},f.prototype.componentWillUnmount=function(){cancelAnimationFrame(this.animateId)},f.prototype.animate=function(o){var i=this;this.setState(function(t){var e=t.items,r=f.move(o,e,i.props),n=r.items,a=r.moving;return i.animateId=null,a&&(i.animateId=requestAnimationFrame(i.animate)),{items:n,restart:!1}})},f.move=function(s,t,e){var u=e.data,n=e.enter,l=e.leave,c=e.update,p=e.progress,a=e.getKey,m=e.duration,h=e.onRest,d=u.reduce(function(t,e,r){var n;return v({},t,((n={})[a(e)]=v({},e,{index:r}),n))},{}),r=t.reduce(function(t,e){var r;return v({},t,((r={})[e.key]=e,r))},{}),o=t.map(function(t,e){var r=d[t.key],n={key:t.key,data:r||t.data,tick:s};n.end=r?c(r):(l||c)(t.data),n.index=r?r.index:u.length+e;var a=f.areEqual(t.end,n.end);if(a){n.start=t.start,n.rest=1===t.progress;var o=(n.tick-t.tick)/m;n.progress=Math.min(t.progress+o,1)}else{n.rest=!1;var i=!a&&f.areEqual(t.start,n.end);n.start=i?t.end:p?t.start:t.style,n.progress=i?1-t.progress:p}return n.style=f.interpolateStyle(n),h&&n.rest&&!t.rest&&h(t.data),n}).filter(function(t){return d[t.key]||!t.rest&&l}).concat(u.filter(function(t){return!r[a(t)]}).map(function(t){var e=d[a(t)].index,r={key:a(t),data:t,tick:s,rest:!1,index:e};return r.start=r.style=n(t),r.end=c(t),r.progress=f.areEqual(r.start,r.end)?1:0,r})).sort(function(t,e){return t.index-e.index});return{items:o,moving:0!==o.filter(function(t){return!t.rest}).length}},f.areEqual=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(t[r]!==e[r])return!1;return!0},f.interpolateStyle=function(t){var e=t.start,r=t.end,n=t.progress,a={};for(var o in r)a[o]=e[o]+n*(r[o]-e[o]);return a},f.prototype.render=function(){return this.props.children(this.state.items)},f.defaultProps={progress:0},f}(p.Component),s=function(r){return function(e){return p.createElement(a.NavigationContext.Consumer,null,function(t){return p.createElement(r,v({stateNavigator:t.stateNavigator,navigationEvent:t},e))})}},u=s(function(r){function t(t){var e=r.call(this,t)||this;return e.state={navigationEvent:null},e}return i(t,r),t.getDerivedStateFromProps=function(t){var e=t.crumb,r=t.navigationEvent,n=r.stateNavigator.stateContext,a=n.state,o=n.crumbs;return a&&o.length===e?{navigationEvent:r}:null},t.prototype.shouldComponentUpdate=function(t,e){return e.navigationEvent!==this.state.navigationEvent},t.prototype.render=function(){var t=this.state.navigationEvent;if(!t)return null;var e=t.stateNavigator.stateContext,r=e.state,n=e.data;return p.createElement(a.NavigationContext.Provider,{value:t},this.props.renderScene(r,n))},t.defaultProps={renderScene:function(t,e){return t.renderScene(e)}},t}(p.Component)),l=function(){function t(){this.sharedElements={}}return t.prototype.registerSharedElement=function(t,e,r,n){this.sharedElements[t]=this.sharedElements[t]||{},this.sharedElements[t][e]={ref:r,data:n}},t.prototype.unregisterSharedElement=function(t,e,r){this.sharedElements[t]&&(e?delete this.sharedElements[t][e]:delete this.sharedElements[t])},t.prototype.getSharedElements=function(t,e){if(t===e)return[];var r=this.sharedElements[e],n=this.sharedElements[t],a=[];for(var o in n)r&&r[o]&&a.push({name:o,oldElement:r[o],mountedElement:n[o]});return a},t}(),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.registerSharedElement=function(t,e,r,n){var a={bubbles:!0,detail:{name:e,data:n,share:!0}};r.dispatchEvent(new CustomEvent("share",a))},e.prototype.unregisterSharedElement=function(t,e,r){var n={bubbles:!0,detail:{name:e,share:!1}};r.dispatchEvent(new CustomEvent("share",n))},e}(l),h=p.createContext(new c),d=function(r){return function(e){return p.createElement(h.Consumer,null,function(t){return p.createElement(r,v({sharedElementRegistry:t},e))})}},f=d(function(r){function t(t){var e=r.call(this,t)||this;return e.ref=p.createRef(),e.share=e.share.bind(e),e}return i(t,r),t.prototype.componentDidMount=function(){var t=this.props,e=t.crumb,r=t.app;this.ref.current.addEventListener("share",this.share),n.render(p.createElement(r,{crumb:e}),this.ref.current)},t.prototype.componentWillUnmount=function(){this.ref.current.removeEventListener("share",this.share),n.unmountComponentAtNode(this.ref.current)},t.prototype.share=function(t){var e=t.target,r=t.detail,n=r.name,a=r.data,o=r.share,i=this.props,s=i.crumb,u=i.sharedElementRegistry;o?u.registerSharedElement(s,n,e,a):u.unregisterSharedElement(s,n,e)},t.prototype.render=function(){return p.createElement("div",{ref:this.ref})},t}(p.Component)),g=s(function(r){function t(t){var e=r.call(this,t)||this;return e.sharedElementRegistry=new l,e.state={rest:!1,stateNavigator:null},e}return i(t,r),t.getDerivedStateFromProps=function(t,e){var r=e.stateNavigator,n=t.stateNavigator;return n!==r?{rest:!1,stateNavigator:n}:null},t.prototype.getSharedElements=function(){var t=this.props.stateNavigator.stateContext,e=t.crumbs,r=t.oldUrl;if(null!==r&&!this.state.rest){var n=r.split("crumb=").length-1;return this.sharedElementRegistry.getSharedElements(e.length,n)}return[]},t.prototype.clearScene=function(a){var o=this;this.setState(function(t){var e=t.rest,r=o.getScenes().filter(function(t){return t.key===a})[0];r||o.sharedElementRegistry.unregisterSharedElement(a);var n=e||r&&r.mount;return n!==e?{rest:n}:null})},t.prototype.getScenes=function(){var t=this.props.stateNavigator.stateContext,e=t.crumbs,u=t.nextCrumb;return e.concat(u).map(function(t,e,r){var n=t.state,a=t.data,o=t.url,i=r.slice(0,e),s=r[e+1]||{state:void 0,data:void 0};return{key:e,state:n,data:a,url:o,crumbs:i,nextState:s.state,nextData:s.data,mount:o===u.url}})},t.prototype.getStyle=function(t,e){var r=e.state,n=e.data,a=e.crumbs,o=e.nextState,i=e.nextData,s=e.mount,u=this.props,l=u.unmountedStyle,c=u.mountedStyle,p=u.crumbStyle,m=t?s?c:p:l;return"function"==typeof m?m(r,n,a,o,i):m},t.prototype.render=function(){var r=this,t=this.props,s=t.children,e=t.duration,u=t.app,l=t.rootPerScene,n=t.sharedElementMotion,a=t.stateNavigator,o=a.stateContext,c=o.crumbs,i=o.oldState;return a.stateContext.state&&p.createElement(h.Provider,{value:this.sharedElementRegistry},p.createElement(m,{data:this.getScenes(),getKey:function(t){return t.key},enter:function(t){return r.getStyle(!i,t)},update:function(t){return r.getStyle(!0,t)},leave:function(t){return r.getStyle(!1,t)},onRest:function(t){var e=t.key;return r.clearScene(e)},duration:e},function(t){return t.map(function(t){var e=t.data,r=e.key,n=e.state,a=e.data,o=t.style,i=l?p.createElement(f,{crumb:r,app:u}):p.createElement(u,{crumb:r});return s(o,i,r,c.length===r,n,a)}).concat(n&&n({key:"sharedElements",sharedElements:r.getSharedElements(),progress:t[c.length]&&t[c.length].progress,duration:e}))}))},t.defaultProps={duration:300,app:function(t){var e=t.crumb;return p.createElement(u,{crumb:e})},rootPerScene:!1},t}(p.Component)),y=s(d(function(r){function t(t){var e=r.call(this,t)||this;return e.ref=p.createRef(),e}return i(t,r),t.prototype.componentDidMount=function(){this.register()},t.prototype.componentDidUpdate=function(t){var e=this.props,r=e.stateNavigator,n=e.sharedElementRegistry,a=r.stateContext.crumbs.length;n.unregisterSharedElement(a,t.name,this.ref.current),this.register()},t.prototype.componentWillUnmount=function(){var t=this.props,e=t.stateNavigator,r=t.sharedElementRegistry,n=e.stateContext.crumbs.length;r.unregisterSharedElement(n,this.props.name,this.ref.current)},t.prototype.register=function(){var t=this.props,e=t.unshare,r=t.name,n=t.data,a=t.stateNavigator,o=t.sharedElementRegistry,i=a.stateContext.crumbs.length;e?o.unregisterSharedElement(i,r,this.ref.current):o.registerSharedElement(i,r,this.ref.current,n)},t.prototype.render=function(){return p.cloneElement(this.props.children,{ref:this.ref})},t}(p.Component))),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidUpdate=function(t){var e=this.getSharedElements(t.sharedElements),r=this.getSharedElements(this.props.sharedElements);this.diff(e,r,this.props.onAnimated),this.diff(r,e,this.props.onAnimating)},e.prototype.diff=function(t,e,r){for(var n in t){var a=t[n],o=e[n];o&&a.mountedElement.ref===o.mountedElement.ref||(r&&r(n,a.oldElement.ref,a.oldElement.data),r&&r(n,a.mountedElement.ref,a.mountedElement.data))}},e.prototype.getSharedElements=function(t){return t.reduce(function(t,e){var r;return v({},t,((r={})[e.name]=e,r))},{})},e.prototype.getStyle=function(t,e){var r=e.ref,n=e.data,a=r.getBoundingClientRect(),o=a.top,i=a.left,s=a.width,u=a.height;return this.props.elementStyle(t,r,v({top:o,left:i,width:s,height:u},n))},e.prototype.getPropValue=function(t,e){return"function"==typeof t?t(e):t},e.prototype.render=function(){var n=this,t=this.props,e=t.sharedElements,u=t.children,r=t.progress,a=t.duration;return 0!==e.length&&p.createElement(m,{data:e,getKey:function(t){return t.name},enter:function(t){var e=t.name,r=t.oldElement;return n.getStyle(e,r)},update:function(t){var e=t.name,r=t.mountedElement;return n.getStyle(e,r)},progress:r<1?r:0,duration:a},function(t){return t.map(function(t){var e=t.data,r=e.name,n=e.oldElement,a=e.mountedElement,o=t.style,i=t.start,s=t.end;return u(o,r,v({},i,n.data),v({},s,a.data))})})},e.defaultProps={duration:300,elementStyle:function(t,e,r){return r}},e}(p.Component);return t.MobileHistoryManager=r,t.NavigationMotion=g,t.Scene=u,t.SharedElement=y,t.SharedElementMotion=E,t}({},Navigation,React,NavigationReact,ReactDOM);