/**
 * Navigation React Mobile v3.1.0
 * (c) Graham Mendick - http://grahammendick.github.io/navigation/
 * License: Apache-2.0
 */
var NavigationReactMobile=function(t,e,d,l){"use strict";var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function a(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},n=function(s){function t(t,e){var n=s.call(this,e||"")||this;return n.hash=!1,n.buildCurrentUrl=t,n.hash=void 0===e,n}return a(t,s),t.prototype.getHref=function(t){var e=t.indexOf("?");if(0<=e){for(var n=t.substring(0,e),r=t.substring(e+1).split("&"),a=[],o=0;o<r.length;o++)"crumb="!==r[o].substring(0,6)&&a.push(r[o]);var i=a.join("&");t=""+n+(i&&"?")+i}return this.hash?"#"+t:s.prototype.getHref.call(this,t)},t.prototype.getUrl=function(t){return this.hash?t.hash.substring(1):s.prototype.getUrl.call(this,t)},t.prototype.getCurrentUrl=function(){var t=this.getUrl(location);return this.buildCurrentUrl&&(t=this.buildCurrentUrl(t)),t},t}(e.HTML5HistoryManager),s=function(n){function h(t){var e=n.call(this,t)||this;return e.animate=e.animate.bind(e),e.state={items:[],restart:!1},e}return a(h,n),h.getDerivedStateFromProps=function(t,e){var n=e.items,r="undefined"!=typeof performance?performance.now():0,a=h.move(r,n,t);return{items:a.items,restart:a.moving}},h.prototype.componentDidMount=function(){this.animateId=requestAnimationFrame(this.animate)},h.prototype.componentDidUpdate=function(){!this.animateId&&this.state.restart&&(this.animateId=requestAnimationFrame(this.animate))},h.prototype.componentWillUnmount=function(){cancelAnimationFrame(this.animateId)},h.prototype.animate=function(o){var i=this;this.setState(function(t){var e=t.items,n=h.move(o,e,i.props),r=n.items,a=n.moving;return i.animateId=null,a&&(i.animateId=requestAnimationFrame(i.animate)),{items:r,restart:!1}})},h.move=function(i,t,e){var n=e.data,r=e.enter,s=e.leave,u=e.update,l=e.progress,a=e.getKey,c=e.duration,d=e.onRest,p=n.reduce(function(t,e,n){var r;return f({},t,((r={})[a(e)]=f({},e,{index:n}),r))},{}),o=t.reduce(function(t,e){var n;return f({},t,((n={})[e.key]=e,n))},{}),m=t.map(function(t){var e=p[t.key],n={key:t.key,data:e||t.data,tick:i};n.end=e?u(e):(s||u)(t.data),n.index=e?e.index:t.index;var r=h.areEqual(t.end,n.end);if(r){n.start=t.start,n.rest=1===t.progress;var a=(n.tick-t.tick)/c;n.progress=Math.min(t.progress+a,1)}else{n.rest=!1;var o=!r&&h.areEqual(t.start,n.end);n.start=o?t.end:l?t.start:t.style,n.progress=o?1-t.progress:l}return n.style=h.interpolateStyle(n),d&&n.rest&&!t.rest&&d(t.data),n}).filter(function(t){return p[t.key]||!t.rest&&s}).concat(n.filter(function(t){return!o[a(t)]}).map(function(t){var e=p[a(t)].index,n={key:a(t),data:t,tick:i,rest:!1,index:e};return n.start=n.style=r(t),n.end=u(t),n.progress=h.areEqual(n.start,n.end)?1:0,n})).sort(function(t,e){return t.index!==e.index?t.index-e.index:t.key.length-e.key.length});return{items:m,moving:0!==m.filter(function(t){return!t.rest}).length}},h.areEqual=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0},h.interpolateStyle=function(t){var e=t.start,n=t.end,r=t.progress,a={};for(var o in n)a[o]=e[o]+r*(n[o]-e[o]);return a},h.prototype.render=function(){return this.props.children(this.state.items)},h.defaultProps={progress:0},h}(d.Component),o=function(n){return function(e){return d.createElement(l.NavigationContext.Consumer,null,function(t){return d.createElement(n,f({stateNavigator:t.stateNavigator,navigationEvent:t},e))})}},p=o(function(n){function t(t){var e=n.call(this,t)||this;return e.state={navigationEvent:null},e}return a(t,n),t.getDerivedStateFromProps=function(t,e){var n=e.navigationEvent,r=t.crumb,a=t.navigationEvent,o=a.stateNavigator.stateContext,i=o.state,s=o.oldState,u=o.oldUrl,l=o.crumbs;return i&&l.length===r?u&&n&&a.stateNavigator.parseLink(u).crumbs.length===r&&s!==i?null:{navigationEvent:a}:null},t.prototype.shouldComponentUpdate=function(t,e){return e.navigationEvent!==this.state.navigationEvent},t.prototype.render=function(){var t=this.state.navigationEvent,e=this.props,n=e.crumb,r=e.navigationEvent.stateNavigator.stateContext,a=r.crumbs,o=r.nextCrumb,i=n<a.length?a[n]:o,s=i.state,u=i.data;return d.createElement(l.NavigationContext.Provider,{value:t},t&&this.props.renderScene(s,u))},t.defaultProps={renderScene:function(t,e){return t.renderScene(e)}},t}(d.Component)),i=function(){function t(){this.sharedElements={}}return t.prototype.registerSharedElement=function(t,e,n,r){this.sharedElements[t]=this.sharedElements[t]||{},this.sharedElements[t][e]={ref:n,data:r}},t.prototype.unregisterSharedElement=function(t,e){this.sharedElements[t]&&(e?delete this.sharedElements[t][e]:delete this.sharedElements[t])},t.prototype.getSharedElements=function(t,e){if(t===e)return[];var n=this.sharedElements[e],r=this.sharedElements[t],a=[];for(var o in r)n&&n[o]&&a.push({name:o,oldElement:n[o],mountedElement:r[o]});return a},t}(),m=d.createContext(new i),u=o(function(n){function t(t){var e=n.call(this,t)||this;return e.sharedElementRegistry=new i,e.state={stateNavigator:null,keys:[],rest:!1},e}return a(t,n),t.getDerivedStateFromProps=function(t,e){var n=t.stateNavigator,r=e.keys;if(n===e.stateNavigator)return null;var a=n.stateContext,o=a.oldState,i=a.state,s=a.crumbs,u=a.nextCrumb,l=s.concat(u).map(function(t,e){return""+e}),c=l.slice(r.length),d=r.slice(0,l.length).concat(c);return r.length===d.length&&o!==i&&(d[d.length-1]+="+"),{keys:d,rest:!1,stateNavigator:n}},t.prototype.getSharedElements=function(){var t=this.props.stateNavigator.stateContext,e=t.crumbs,n=t.oldUrl;if(null!==n&&!this.state.rest){var r=n.split("crumb=").length-1;return this.sharedElementRegistry.getSharedElements(e.length,r)}return[]},t.prototype.clearScene=function(a){var o=this;this.setState(function(t){var e=t.rest,n=o.getScenes().filter(function(t){return t.key===a})[0];n||o.sharedElementRegistry.unregisterSharedElement(a);var r=e||n&&n.mount;return r!==e?{rest:r}:null})},t.prototype.getScenes=function(){var t=this.props.stateNavigator,c=this.state.keys,e=t.stateContext,n=e.crumbs,d=e.nextCrumb;return n.concat(d).map(function(t,e,n){var r=t.state,a=t.data,o=t.url,i=n.slice(0,e),s=n[e+1]||{state:void 0,data:void 0},u=s.state,l=s.data;return{key:c[e],state:r,data:a,url:o,crumbs:i,nextState:u,nextData:l,mount:o===d.url}})},t.prototype.getStyle=function(t,e){var n=e.state,r=e.data,a=e.crumbs,o=e.nextState,i=e.nextData,s=e.mount,u=this.props,l=u.unmountedStyle,c=u.mountedStyle,d=u.crumbStyle,p=t?s?c:d:l;return"function"==typeof p?p(n,r,a,o,i):p},t.prototype.render=function(){var n=this,t=this.props,u=t.children,e=t.duration,l=t.renderScene,r=t.sharedElementMotion,a=t.stateNavigator,o=a.stateContext,c=o.crumbs,i=o.oldState;return a.stateContext.state&&d.createElement(m.Provider,{value:this.sharedElementRegistry},d.createElement(s,{data:this.getScenes(),getKey:function(t){return t.key},enter:function(t){return n.getStyle(!i,t)},update:function(t){return n.getStyle(!0,t)},leave:function(t){return n.getStyle(!1,t)},onRest:function(t){var e=t.key;return n.clearScene(e)},duration:e},function(t){return t.map(function(t){var e=t.data,n=e.key,r=e.state,a=e.data,o=t.style,i=+n.replace(/\++$/,""),s=d.createElement(p,{crumb:i,renderScene:l});return u(o,s,n,c.length===i,r,a)}).concat(r&&r({key:"sharedElements",sharedElements:n.getSharedElements(),progress:t[c.length]&&t[c.length].progress,duration:e}))}))},t.defaultProps={duration:300},t}(d.Component)),c=function(n){function t(t){var e=n.call(this,t)||this;return e.ref=d.createRef(),e}return a(t,n),t.prototype.componentDidMount=function(){this.register()},t.prototype.componentDidUpdate=function(t){var e=this.props,n=e.stateNavigator,r=e.sharedElementRegistry,a=n.stateContext.crumbs.length;r.unregisterSharedElement(a,t.name),this.register()},t.prototype.componentWillUnmount=function(){var t=this.props,e=t.stateNavigator,n=t.sharedElementRegistry,r=e.stateContext.crumbs.length;n.unregisterSharedElement(r,this.props.name)},t.prototype.register=function(){var t=this.props,e=t.unshare,n=t.name,r=t.data,a=t.stateNavigator,o=t.sharedElementRegistry,i=a.stateContext.crumbs.length;e?o.unregisterSharedElement(i,n):o.registerSharedElement(i,n,this.ref.current,r)},t.prototype.render=function(){return d.cloneElement(this.props.children,{ref:this.ref})},t}(d.Component),h=o(function(e){return d.createElement(m.Consumer,null,function(t){return d.createElement(c,f({},e,{sharedElementRegistry:t}))})}),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.componentDidUpdate=function(t){var e=this.getSharedElements(t.sharedElements),n=this.getSharedElements(this.props.sharedElements);this.diff(e,n,this.props.onAnimated),this.diff(n,e,this.props.onAnimating)},e.prototype.diff=function(t,e,n){for(var r in t){var a=t[r],o=e[r];o&&a.mountedElement.ref===o.mountedElement.ref||(n&&n(r,a.oldElement.ref,a.oldElement.data),n&&n(r,a.mountedElement.ref,a.mountedElement.data))}},e.prototype.getSharedElements=function(t){return t.reduce(function(t,e){var n;return f({},t,((n={})[e.name]=e,n))},{})},e.prototype.getStyle=function(t,e){var n=e.ref,r=e.data,a=n.getBoundingClientRect(),o=a.top,i=a.left,s=a.width,u=a.height;return this.props.elementStyle(t,n,f({top:o,left:i,width:s,height:u},r))},e.prototype.getPropValue=function(t,e){return"function"==typeof t?t(e):t},e.prototype.render=function(){var r=this,t=this.props,e=t.sharedElements,u=t.children,n=t.progress,a=t.duration;return 0!==e.length&&d.createElement(s,{data:e,getKey:function(t){return t.name},enter:function(t){var e=t.name,n=t.oldElement;return r.getStyle(e,n)},update:function(t){var e=t.name,n=t.mountedElement;return r.getStyle(e,n)},progress:n<1?n:0,duration:a},function(t){return t.map(function(t){var e=t.data,n=e.name,r=e.oldElement,a=e.mountedElement,o=t.style,i=t.start,s=t.end;return u(o,n,f({},i,r.data),f({},s,a.data))})})},e.defaultProps={duration:300,elementStyle:function(t,e,n){return n}},e}(d.Component);return t.MobileHistoryManager=n,t.NavigationMotion=u,t.SharedElement=h,t.SharedElementMotion=g,t}({},Navigation,React,NavigationReact);