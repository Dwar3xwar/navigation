/**
 * Navigation React Mobile v3.0.0
 * (c) Graham Mendick - http://grahammendick.github.io/navigation/
 * License: Apache-2.0
 */
var NavigationReactMobile=function(t,e,c,l){"use strict";var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function a(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},n=function(s){function t(t,e){var n=s.call(this,e||"")||this;return n.hash=!1,n.buildCurrentUrl=t,n.hash=void 0===e,n}return a(t,s),t.prototype.getHref=function(t){var e=t.indexOf("?");if(0<=e){for(var n=t.substring(0,e),r=t.substring(e+1).split("&"),a=[],o=0;o<r.length;o++)"crumb="!==r[o].substring(0,6)&&a.push(r[o]);var i=a.join("&");t=""+n+(i&&"?")+i}return this.hash?"#"+t:s.prototype.getHref.call(this,t)},t.prototype.getUrl=function(t){return this.hash?t.hash.substring(1):s.prototype.getUrl.call(this,t)},t.prototype.getCurrentUrl=function(){var t=this.getUrl(location);return this.buildCurrentUrl&&(t=this.buildCurrentUrl(t)),t},t}(e.HTML5HistoryManager),p=function(n){function f(t){var e=n.call(this,t)||this;return e.animate=e.animate.bind(e),e.state={items:[],restart:!1},e}return a(f,n),f.getDerivedStateFromProps=function(t,e){var n=e.items,r="undefined"!=typeof performance?performance.now():0,a=f.move(r,n,t);return{items:a.items,restart:a.moving}},f.prototype.componentDidMount=function(){this.animateId=requestAnimationFrame(this.animate)},f.prototype.componentDidUpdate=function(){!this.animateId&&this.state.restart&&(this.animateId=requestAnimationFrame(this.animate))},f.prototype.componentWillUnmount=function(){cancelAnimationFrame(this.animateId)},f.prototype.animate=function(o){var i=this;this.setState(function(t){var e=t.items,n=f.move(o,e,i.props),r=n.items,a=n.moving;return i.animateId=null,a&&(i.animateId=requestAnimationFrame(i.animate)),{items:r,restart:!1}})},f.move=function(s,t,e){var u=e.data,r=e.enter,l=e.leave,c=e.update,p=e.progress,a=e.getKey,d=e.duration,m=e.onRest,h=u.reduce(function(t,e,n){var r;return g({},t,((r={})[a(e)]=g({},e,{index:n}),r))},{}),n=t.reduce(function(t,e){var n;return g({},t,((n={})[e.key]=e,n))},{}),o=t.map(function(t,e){var n=h[t.key],r={key:t.key,data:n||t.data,tick:s};r.end=n?c(n):(l||c)(t.data),r.index=n?n.index:u.length+e;var a=f.areEqual(t.end,r.end);if(a){r.start=t.start,r.rest=1===t.progress;var o=(r.tick-t.tick)/d;r.progress=Math.min(t.progress+o,1)}else{r.rest=!1;var i=!a&&f.areEqual(t.start,r.end);r.start=i?t.end:p?t.start:t.style,r.progress=i?1-t.progress:p}return r.style=f.interpolateStyle(r),m&&r.rest&&!t.rest&&m(t.data),r}).filter(function(t){return h[t.key]||!t.rest&&l}).concat(u.filter(function(t){return!n[a(t)]}).map(function(t){var e=h[a(t)].index,n={key:a(t),data:t,tick:s,rest:!1,index:e};return n.start=n.style=r(t),n.end=c(t),n.progress=f.areEqual(n.start,n.end)?1:0,n})).sort(function(t,e){return t.index-e.index});return{items:o,moving:0!==o.filter(function(t){return!t.rest}).length}},f.areEqual=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0},f.interpolateStyle=function(t){var e=t.start,n=t.end,r=t.progress,a={};for(var o in n)a[o]=e[o]+r*(n[o]-e[o]);return a},f.prototype.render=function(){return this.props.children(this.state.items)},f.defaultProps={progress:0},f}(c.Component),o=function(n){return function(e){return c.createElement(l.NavigationContext.Consumer,null,function(t){return c.createElement(n,g({stateNavigator:t.stateNavigator,navigationEvent:t},e))})}},d=o(function(n){function t(t){var e=n.call(this,t)||this;return e.state={navigationEvent:null},e}return a(t,n),t.getDerivedStateFromProps=function(t){var e=t.crumb,n=t.navigationEvent,r=n.stateNavigator.stateContext,a=r.state,o=r.crumbs;return a&&o.length===e?{navigationEvent:n}:null},t.prototype.shouldComponentUpdate=function(t,e){return e.navigationEvent!==this.state.navigationEvent},t.prototype.render=function(){var t=this.state.navigationEvent,e=this.props,n=e.crumb,r=e.navigationEvent.stateNavigator.stateContext,a=r.crumbs,o=r.nextCrumb,i=n<a.length?a[n]:o,s=i.state,u=i.data;return c.createElement(l.NavigationContext.Provider,{value:t},t&&this.props.renderScene(s,u))},t.defaultProps={renderScene:function(t,e){return t.renderScene(e)}},t}(c.Component)),i=function(){function t(){this.sharedElements={}}return t.prototype.registerSharedElement=function(t,e,n,r){this.sharedElements[t]=this.sharedElements[t]||{},this.sharedElements[t][e]={ref:n,data:r}},t.prototype.unregisterSharedElement=function(t,e){this.sharedElements[t]&&(e?delete this.sharedElements[t][e]:delete this.sharedElements[t])},t.prototype.getSharedElements=function(t,e){if(t===e)return[];var n=this.sharedElements[e],r=this.sharedElements[t],a=[];for(var o in r)n&&n[o]&&a.push({name:o,oldElement:n[o],mountedElement:r[o]});return a},t}(),m=c.createContext(new i),s=o(function(n){function t(t){var e=n.call(this,t)||this;return e.sharedElementRegistry=new i,e.state={rest:!1,stateNavigator:null},e}return a(t,n),t.getDerivedStateFromProps=function(t,e){var n=e.stateNavigator,r=t.stateNavigator;return r!==n?{rest:!1,stateNavigator:r}:null},t.prototype.getSharedElements=function(){var t=this.props.stateNavigator.stateContext,e=t.crumbs,n=t.oldUrl;if(null!==n&&!this.state.rest){var r=n.split("crumb=").length-1;return this.sharedElementRegistry.getSharedElements(e.length,r)}return[]},t.prototype.clearScene=function(a){var o=this;this.setState(function(t){var e=t.rest,n=o.getScenes().filter(function(t){return t.key===a})[0];n||o.sharedElementRegistry.unregisterSharedElement(a);var r=e||n&&n.mount;return r!==e?{rest:r}:null})},t.prototype.getScenes=function(){var t=this.props.stateNavigator.stateContext,e=t.crumbs,u=t.nextCrumb;return e.concat(u).map(function(t,e,n){var r=t.state,a=t.data,o=t.url,i=n.slice(0,e),s=n[e+1]||{state:void 0,data:void 0};return{key:e,state:r,data:a,url:o,crumbs:i,nextState:s.state,nextData:s.data,mount:o===u.url}})},t.prototype.getStyle=function(t,e){var n=e.state,r=e.data,a=e.crumbs,o=e.nextState,i=e.nextData,s=e.mount,u=this.props,l=u.unmountedStyle,c=u.mountedStyle,p=u.crumbStyle,d=t?s?c:p:l;return"function"==typeof d?d(n,r,a,o,i):d},t.prototype.render=function(){var n=this,t=this.props,s=t.children,e=t.duration,u=t.renderScene,r=t.sharedElementMotion,a=t.stateNavigator,o=a.stateContext,l=o.crumbs,i=o.oldState;return a.stateContext.state&&c.createElement(m.Provider,{value:this.sharedElementRegistry},c.createElement(p,{data:this.getScenes(),getKey:function(t){return t.key},enter:function(t){return n.getStyle(!i,t)},update:function(t){return n.getStyle(!0,t)},leave:function(t){return n.getStyle(!1,t)},onRest:function(t){var e=t.key;return n.clearScene(e)},duration:e},function(t){return t.map(function(t){var e=t.data,n=e.key,r=e.state,a=e.data,o=t.style,i=c.createElement(d,{crumb:n,renderScene:u});return s(o,i,n,l.length===n,r,a)}).concat(r&&r({key:"sharedElements",sharedElements:n.getSharedElements(),progress:t[l.length]&&t[l.length].progress,duration:e}))}))},t.defaultProps={duration:300},t}(c.Component)),u=function(n){function t(t){var e=n.call(this,t)||this;return e.ref=c.createRef(),e}return a(t,n),t.prototype.componentDidMount=function(){this.register()},t.prototype.componentDidUpdate=function(t){var e=this.props,n=e.stateNavigator,r=e.sharedElementRegistry,a=n.stateContext.crumbs.length;r.unregisterSharedElement(a,t.name),this.register()},t.prototype.componentWillUnmount=function(){var t=this.props,e=t.stateNavigator,n=t.sharedElementRegistry,r=e.stateContext.crumbs.length;n.unregisterSharedElement(r,this.props.name)},t.prototype.register=function(){var t=this.props,e=t.unshare,n=t.name,r=t.data,a=t.stateNavigator,o=t.sharedElementRegistry,i=a.stateContext.crumbs.length;e?o.unregisterSharedElement(i,n):o.registerSharedElement(i,n,this.ref.current,r)},t.prototype.render=function(){return c.cloneElement(this.props.children,{ref:this.ref})},t}(c.Component),h=o(function(e){return c.createElement(m.Consumer,null,function(t){return c.createElement(u,g({},e,{sharedElementRegistry:t}))})}),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.componentDidUpdate=function(t){var e=this.getSharedElements(t.sharedElements),n=this.getSharedElements(this.props.sharedElements);this.diff(e,n,this.props.onAnimated),this.diff(n,e,this.props.onAnimating)},e.prototype.diff=function(t,e,n){for(var r in t){var a=t[r],o=e[r];o&&a.mountedElement.ref===o.mountedElement.ref||(n&&n(r,a.oldElement.ref,a.oldElement.data),n&&n(r,a.mountedElement.ref,a.mountedElement.data))}},e.prototype.getSharedElements=function(t){return t.reduce(function(t,e){var n;return g({},t,((n={})[e.name]=e,n))},{})},e.prototype.getStyle=function(t,e){var n=e.ref,r=e.data,a=n.getBoundingClientRect(),o=a.top,i=a.left,s=a.width,u=a.height;return this.props.elementStyle(t,n,g({top:o,left:i,width:s,height:u},r))},e.prototype.getPropValue=function(t,e){return"function"==typeof t?t(e):t},e.prototype.render=function(){var r=this,t=this.props,e=t.sharedElements,u=t.children,n=t.progress,a=t.duration;return 0!==e.length&&c.createElement(p,{data:e,getKey:function(t){return t.name},enter:function(t){var e=t.name,n=t.oldElement;return r.getStyle(e,n)},update:function(t){var e=t.name,n=t.mountedElement;return r.getStyle(e,n)},progress:n<1?n:0,duration:a},function(t){return t.map(function(t){var e=t.data,n=e.name,r=e.oldElement,a=e.mountedElement,o=t.style,i=t.start,s=t.end;return u(o,n,g({},i,r.data),g({},s,a.data))})})},e.defaultProps={duration:300,elementStyle:function(t,e,n){return n}},e}(c.Component);return t.MobileHistoryManager=n,t.NavigationMotion=s,t.SharedElement=h,t.SharedElementMotion=f,t}({},Navigation,React,NavigationReact);