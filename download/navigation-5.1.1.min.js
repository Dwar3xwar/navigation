/**
 * Navigation v5.1.1
 * (c) Graham Mendick - http://grahammendick.github.io/navigation/
 * License: Apache-2.0
 */
var Navigation=function(t){"use strict";var f=function(){function t(){this.oldState=null,this.oldData={},this.oldUrl=null,this.previousState=null,this.previousData={},this.previousUrl=null,this.state=null,this.data={},this.url=null,this.asyncData=void 0,this.title=null,this.history=!1,this.crumbs=[],this.nextCrumb=null}return t.prototype.clear=function(){this.oldState=null,this.oldData={},this.oldUrl=null,this.previousState=null,this.previousData={},this.previousUrl=null,this.state=null,this.data={},this.url=null,this.asyncData=void 0,this.title=null,this.history=!1,this.crumbs=[],this.nextCrumb=null},t.prototype.includeCurrentData=function(t,e){if(!e)for(var r in e=[],this.data)e.push(r);for(var n={},a=0;a<e.length;a++)n[e[a]]=this.data[e[a]];for(var r in t)n[r]=t[r];return n},t}(),n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function r(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t};var v=function(t,e,r,n,a){this.data=t||{},this.state=e,this.last=a,this.title=e.title,this.url=r,this.crumblessUrl=n},a=function(){function t(t){this.handlerId=1,this.handlers={},this.name=t}return t.prototype.onEvent=function(t){if(t[this.name])throw new Error("Cannot add the same handler more than once");var e=this.name+this.handlerId++;t[this.name]=e,this.handlers[e]=t},t.prototype.offEvent=function(t){delete this.handlers[t[this.name]],delete t[this.name]},t}();var i=function(){function t(t){void 0===t&&(t=!1),this.navigateHistory=null,this.replaceQueryIdentifier=!1,this.disabled="undefined"==typeof window||!("onhashchange"in window),this.replaceQueryIdentifier=t}return t.prototype.init=function(t){this.disabled||this.navigateHistory||(this.navigateHistory=function(){return t()},window.addEventListener?window.addEventListener("hashchange",this.navigateHistory):window.attachEvent("onhashchange",this.navigateHistory))},t.prototype.addHistory=function(t,e){var r=this.getHref(t);this.disabled||window.location.hash===r||(e?window.location.replace(r):window.location.hash=r)},t.prototype.getCurrentUrl=function(){return this.getUrl(window.location)},t.prototype.getHref=function(t){if(null==t)throw new Error("The Url is invalid");return"#"+this.encode(t)},t.prototype.getUrl=function(t){return this.decode(t.hash.substring(1))},t.prototype.stop=function(){this.navigateHistory&&(window.removeEventListener?window.removeEventListener("hashchange",this.navigateHistory):window.detachEvent("onhashchange",this.navigateHistory)),this.navigateHistory=null},t.prototype.encode=function(t){return this.replaceQueryIdentifier?t.replace("?","#"):t},t.prototype.decode=function(t){return this.replaceQueryIdentifier?t.replace("#","?"):t},t}(),e=function(){function t(t,e){this.key=t,this.name=e}return t.prototype.convertFrom=function(t,e){return void 0===e&&(e=!1),null},t.prototype.convertTo=function(t){return null},t}(),o=function(n){function i(t,e){var r=n.call(this,e,t.name+"array")||this;return r.converter=t,r}return r(i,n),i.prototype.convertFrom=function(t,e){var r=[];if("string"==typeof t)if(e){if(0===t.length)throw new Error("Empty string is not a valid array item");r.push(this.converter.convertFrom(t))}else for(var n=t.split(i.SEPARATOR),a=0;a<n.length;a++){if(0===n[a].length)throw new Error("Empty string is not a valid array item");r.push(this.converter.convertFrom(n[a].replace(/0-/g,"-")))}else for(a=0;a<t.length;a++){if(0===t[a].length)throw new Error("Empty string is not a valid array item");r.push(this.converter.convertFrom(t[a]))}return r},i.prototype.convertTo=function(t){for(var e=[],r=[],n=0;n<t.length;n++){if(null==t[n]||!t[n].toString())throw new Error("Invalid navigation data, arrays cannnot contain null, undefined or empty string");var a=this.converter.convertTo(t[n]).val;r.push(a),e.push(a.replace(/-/g,"0-"))}return{val:e.join(i.SEPARATOR),arrayVal:r}},i.SEPARATOR="1-",i}(e),s=function(e){function t(t){return e.call(this,t,"boolean")||this}return r(t,e),t.prototype.convertFrom=function(t){if("true"!==t&&"false"!==t)throw new Error(t+" is not a valid boolean");return"true"===t},t.prototype.convertTo=function(t){return{val:""+t}},t}(e),u=function(e){function t(t){return e.call(this,t,"date")||this}return r(t,e),t.prototype.convertFrom=function(t){var e=t.split("-");if(3!==e.length)throw new Error(t+" is not a valid date");var r=new Date(+e[0],+e[1]-1,+e[2]);if(isNaN(+r))throw new Error(t+" is not a valid date");return r},t.prototype.convertTo=function(t){return{val:t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},t}(e),l=function(e){function t(t){return e.call(this,t,"number")||this}return r(t,e),t.prototype.convertFrom=function(t){if(isNaN(+t))throw new Error(t+" is not a valid number");return+t},t.prototype.convertTo=function(t){return{val:""+t}},t}(e),h=function(e){function t(t){return e.call(this,t,"string")||this}return r(t,e),t.prototype.convertFrom=function(t){if("string"!=typeof t)throw new Error(t+" is not a valid string");return t},t.prototype.convertTo=function(t){return{val:""+t}},t}(e),p=function(){function t(){this.keyToConverterList={},this.nameToConverterList={};for(var t=[new h("0"),new s("1"),new l("2"),new u("3")],e=0;e<t.length;e++){var r=t[e],n=new o(r,"a"+r.key);this.keyToConverterList[r.key]=this.nameToConverterList[r.name]=r,this.keyToConverterList[n.key]=this.nameToConverterList[n.name]=n}}return t.prototype.getConverterFromKey=function(t){return this.keyToConverterList[t]},t.prototype.getConverterFromName=function(t){var e=this.nameToConverterList[t];if(!e)throw new Error("No TypeConverter found for "+t);return e},t}(),d=function(){function l(){this.converterFactory=new p}return l.prototype.formatData=function(t,e,r){var n={},a={};for(var i in e){var o=e[i];null!=o&&0!==o.length&&this.formatDataItem(t,i,o,n,a)}return t.trackCrumbTrail&&0<r.length&&this.formatDataItem(t,t.crumbTrailKey,r,n,a),{data:n,arrayData:a}},l.prototype.formatDataItem=function(t,e,r,n,a){var i=this.formatURLObject(e,r,t);(r=i.val)!==t.formattedDefaults[e]&&(n[e]=r,a[e]=i.arrayVal)},l.decodeUrlValue=function(t){return t.replace(/0_/g,"_")},l.encodeUrlValue=function(t){return t.replace(/_/g,"0_")},l.prototype.formatURLObject=function(t,e,r,n){void 0===n&&(n=!1),n=n||r.trackTypes;var a=r.defaultTypes[t]||"string",i=this.getConverter(e),o=i.convertTo(e),s=o.val,u=o.arrayVal;return n&&(s=l.encodeUrlValue(s),u&&(u[0]=l.encodeUrlValue(u[0]))),r.trackTypes&&i.name!==a&&(s+=l.SEPARATOR+i.key,u&&(u[0]=u[0]+l.SEPARATOR+i.key)),{val:s,arrayVal:u}},l.prototype.parseData=function(t,e,r){var n={};for(var a in t)l.isDefault(a,t,e,!!r[a])||(n[a]=this.parseURLString(a,t[a],e,!1,!!r[a]));for(var a in e.defaults)null!=n[a]&&n[a].toString()||(n[a]=e.defaults[a]);return n},l.isDefault=function(t,e,r,n){var a=e[t],i=r.formattedArrayDefaults[t];if(n&&i){if("string"==typeof a&&(a=[a]),a.length!==i.length)return!1;for(var o=0;o<a.length;o++)if(a[o]!==i[o])return!1;return!0}return a===r.formattedDefaults[t]},l.prototype.parseURLString=function(t,e,r,n,a){void 0===n&&(n=!1),void 0===a&&(a=!1),n=n||r.trackTypes;var i=r.defaultTypes[t]||"string",o="string"==typeof e?e:e[0],s=this.converterFactory.getConverterFromName(i).key;if(r.trackTypes&&-1<o.indexOf(l.SEPARATOR)){var u=o.split(l.SEPARATOR);o=u[0],s=u[1]}return n&&(o=l.decodeUrlValue(o)),"string"==typeof e?e=o:e[0]=o,this.converterFactory.getConverterFromKey(s).convertFrom(e,a)},l.prototype.getConverter=function(t){var e=l.getTypeName(t);if("array"===e){for(var r=t,n="string",a=0;a<r.length;a++)if(null!=r[a]&&r[a].toString()){n=l.getTypeName(r[a]);break}e=n+e}return this.converterFactory.getConverterFromName(e)},l.getTypeName=function(t){var e=typeof t;return"object"===e&&(e=(e=Object.prototype.toString.call(t)).substring(8,e.length-1).toLowerCase()),e},l.SEPARATOR="1_",l}(),g=function(){function t(){this.defaults={},this.defaultTypes={},this.formattedDefaults={},this.formattedArrayDefaults={},this.trackCrumbTrail=!1,this.trackTypes=!0}return t.prototype.unloading=function(t,e,r,n,a){n()},t.prototype.navigating=function(t,e,r,n){r()},t.prototype.dispose=function(){},t.prototype.navigated=function(t,e){},t.prototype.urlEncode=function(t,e,r,n,a){return encodeURIComponent(r)},t.prototype.urlDecode=function(t,e,r,n){return decodeURIComponent(r)},t.prototype.validate=function(t){return!0},t.prototype.truncateCrumbTrail=function(t,e,r){return r},t}(),y=function(){function t(t,e,r){this.pattern="",this.params=[],this.subSegments=[],this.subSegmentPattern=/[{]{0,1}[^{}]+[}]{0,1}/g,this.escapePattern=/[\.+*\^$\[\](){}']/g,this.path=t,this.optional=e,this.parse(r)}return t.prototype.parse=function(t){if(0!==this.path.length){for(var e=this.path.match(this.subSegmentPattern),r=0;r<e.length;r++){var n=e[r];if("{"===n.slice(0,1)){var a=n.substring(1,n.length-1),i="?"===a.slice(-1),o="*"===a.slice(0,1),s=i?a.slice(0,-1):a;s=o?s.slice(1):s,this.params.push({name:s,splat:o}),this.optional=this.optional&&i&&this.path.length===n.length,this.path.length===n.length&&(i=this.optional),this.subSegments.push({name:s,param:!0,splat:o,optional:i});var u=o?".+":"[^/]+";this.pattern+=this.optional?"(/"+u+")":"("+u+")",this.pattern+=i?"?":""}else this.optional=!1,this.subSegments.push({name:n,param:!1,splat:!1,optional:!1}),this.pattern+=n.replace(this.escapePattern,"\\$&")}this.optional||(this.pattern="/"+this.pattern)}},t.prototype.build=function(t,e,r){for(var n="",a=!1,i=!1,o=0;o<this.subSegments.length;o++){var s=this.subSegments[o];if(s.param){var u=t[s.name],l=e[s.name];if(i=s.optional&&(!u||u===l),(this.optional||!i)&&(u=u||l,a=a||!u,u))if(s.splat&&"string"!=typeof u){var h=[];for(o=0;o<u.length;o++)h[o]=r(s.name,u[o]);n+=h.join("/")}else n+=r(s.name,u)}else n+=s.name}return{path:a?null:n,optional:i&&this.optional}},t}(),m=function(){function t(t,e){this.segments=[],this.params=[],this.path=t,this.defaults=e||{},this.parse()}return t.prototype.parse=function(){for(var t,e=this.path.split("/").reverse(),r="",n=0;n<e.length;n++){t=new y(e[n],!t||t.optional,this.defaults),this.segments.unshift(t),r=t.pattern+r;for(var a=[],i=0;i<t.params.length;i++){var o=t.params[i];a.push({name:o.name,optional:t.optional,splat:o.splat})}this.params=a.concat(this.params)}this.pattern=new RegExp("^"+r+"$","i")},t.prototype.match=function(t,e){var r=this.pattern.exec(t);if(!r)return null;for(var n={},a=1;a<r.length;a++){var i=this.params[a-1];if(r[a]){var o=i.optional?r[a].substring(1):r[a];if(-1===o.indexOf("/"))n[i.name]=e(this,i.name,o);else{for(var s=o.split("/"),u=[],l=0;l<s.length;l++)u[l]=e(this,i.name,s[l]);n[i.name]=u}}}return n},t.prototype.build=function(t,n){var a=this;t=t||{};for(var e="",r=!0,i=!1,o=this.segments.length-1;0<=o;o--){var s=this.segments[o].build(t,this.defaults,function(t,e){var r=n(a,t,e);return i=i||!r,r});if(i)return null;if(!(r=r&&s.optional)){if(null==s.path)return null;e="/"+s.path+e}}return 0!==e.length?e:"/"},t}(),w=function(){function t(){this.routes=[]}return t.prototype.addRoute=function(t,e){t="/"===(t="/"===t.slice(-1)?t.substring(0,t.length-1):t).substring(0,1)?t.substring(1):t;var r=new m(t,e);return this.routes.push(r),r},t.prototype.match=function(t,e,r){t="/"===(t="/"===t.slice(-1)?t.substring(0,t.length-1):t).substring(0,1)||0===t.length?t:"/"+t;for(var n=!e,a=0;a<this.routes.length;a++){var i=this.routes[a];if(n){var o=i.match(t,r);if(o)return{route:i,data:o}}else n=i===e}return null},t.prototype.sort=function(t){this.routes.sort(t)},t}(),b=function(){function c(){}return c.prototype.getData=function(t,e){var r=this.router.match(t,e,c.urlDecode);if(!r)return null;var n={},a=r.route,i=r.route,o=i._splat,s=i._state,u=i.params,l=r.data;if(o)for(var h=0;h<u.length;h++){var p=u[h];p.splat&&(n[p.name]=!0)}return{state:s,data:l,separableData:n,route:a}},c.prototype.getRoute=function(t,e,r){void 0===r&&(r={});var n=t._routeInfo,a="";for(var i in n.params)e[i]&&(a+=n.params[i]+",");a=a.slice(0,-1);var o=n.matches[a],s=null;if(o){var u=c.getCombinedData(o.route,e,r);s=o.route.build(u,c.urlEncode)}else{var l=c.findBestMatch(n.routes,e,r);l&&(s=l.routePath,o={route:l.route,data:l.data},n.matches[a]=o)}return{route:s,data:o?o.data:{}}},c.findBestMatch=function(t,e,r){for(var n,a=-1,i=-1,o=0;o<t.length;o++){var s=t[o],u=c.getCombinedData(s,e,r),l=s.build(u,c.urlEncode);if(l){for(var h=0,p={},f=0;f<s.params.length;f++)u[s.params[f].name]&&(p[s.params[f].name]={},h++);(a<h||h===a&&s.params.length<i)&&(n={route:s,data:p,routePath:l},a=h,i=s.params.length)}}return n},c.getCombinedData=function(t,e,r){if(!t._splat)return e;var n={};for(var a in e)n[a]=e[a];for(var i=0;i<t.params.length;i++){var o=t.params[i],s=r[o.name];o.splat&&s&&(n[o.name]=s)}return n},c.urlEncode=function(t,e,r){var n=t._state;return n.urlEncode(n,e,r,!1)},c.urlDecode=function(t,e,r){var n=t._state;return n.urlDecode(n,e,r,!1)},c.prototype.addRoutes=function(t){this.router=new w;for(var e=0;e<t.length;e++)this.addStateRoutes(t[e])},c.prototype.addStateRoutes=function(t){for(var e={routes:[],params:{},matches:{}},r=0,n=c.getRoutes(t),a=0;a<n.length;a++){for(var i=this.router.addRoute(n[a],t.formattedDefaults),o=!1,s=0;s<i.params.length;s++){var u=i.params[s];e.params[u.name]||(e.params[u.name]=r,r++),o=o||u.splat}e.routes.push(i),i._state=t,i._splat=o,i.defaults=c.getCombinedData(i,t.formattedDefaults,t.formattedArrayDefaults)}t._routeInfo=e},c.getRoutes=function(t){var e=[],r=t.route;if("string"==typeof r)e=e.concat(c.expandRoute(r));else for(var n=0;n<r.length;n++)e=e.concat(c.expandRoute(r[n]));return e},c.expandRoute=function(t){for(var e=[],r=t.split("+"),n="",a=0;a<r.length;a++)n+=r[a],e.push(n);return e},c}(),C=function(){function t(){this.navigationDataManager=new d,this.router=new b}return t.prototype.buildStates=function(t){for(var e=[],r={},n=0;n<t.length;n++){var a=t[n],i=new g;for(var o in a)i[o]=a[o];if(!i.key)throw new Error("State key is mandatory");if(null==i.route&&(i.route=i.key),i.trackCrumbTrail){i.trackCrumbTrail=!0,i.crumbTrailKey="crumb";var s=a.trackCrumbTrail;"string"==typeof s&&(i.crumbTrailKey=s),i.defaultTypes[i.crumbTrailKey]="stringarray"}for(var o in i.defaults){i.defaultTypes[o]||(i.defaultTypes[o]=this.navigationDataManager.getConverter(i.defaults[o]).name);var u=this.navigationDataManager.formatURLObject(o,i.defaults[o],i);i.formattedDefaults[o]=u.val,u.arrayVal&&(i.formattedArrayDefaults[o]=u.arrayVal)}if(r[i.key])throw new Error("A State with key "+i.key+" already exists");r[i.key]=!0,e.push(i)}return this.router.addRoutes(e),e},t.prototype.getLink=function(t,e,r,n){var a=[];if(r){r=r.slice(),n&&r.push(n),r=t.truncateCrumbTrail(t,c({},t.defaults,e),r);for(var i=0;i<r.length;i++)a.push(r[i].crumblessUrl)}return this.getNavigationLink(t,e,a)},t.prototype.getNavigationLink=function(t,e,r){var n=this.navigationDataManager.formatData(t,e,r),a=n.data,i=n.arrayData,o=this.router.getRoute(t,a,i);if(null==o.route)return null;var s=[];for(var u in a)if(!o.data[u]){var l=i[u];if(l)for(var h=0;h<l.length;h++){p=t.urlEncode(t,null,u,!0,h),f=t.urlEncode(t,u,l[h],!0);s.push(p+(f?"="+f:""))}else{var p=t.urlEncode(t,null,u,!0),f=t.urlEncode(t,u,a[u],!0);s.push(p+(f?"="+f:""))}}return 0<s.length&&(o.route+="?"+s.join("&")),o.route},t.prototype.parseLink=function(t,e,r){void 0===r&&(r="");var n=t.indexOf("?"),a=n<0?t:t.substring(0,n),i=0<=n?t.substring(n+1):null,o=this.router.getData(a,e);if(!o)throw new Error("The Url "+t+" is invalid"+(r||"\nNo match found"));var s=o.state,u=o.data,l=o.separableData,h=o.route;try{var p=this.getNavigationData(i,s,u||{},l)}catch(t){r+="\n"+t.message}return p||this.parseLink(t,h,r)},t.prototype.getNavigationData=function(t,e,r,n){if(t)for(var a=t.split("&"),i=0;i<a.length;i++){var o=a[i].split("="),s=e.urlDecode(e,null,o[0],!0),u=e.urlDecode(e,s,o[1]||"",!0);n[s]=!0;var l=r[s];l?("string"==typeof l&&(r[s]=l=[l]),l.push(u)):r[s]=u}var h=(r=this.navigationDataManager.parseData(r,e,n))[e.crumbTrailKey];return delete r[e.crumbTrailKey],e.validate(r)?(r[e.crumbTrailKey]=this.getCrumbs(h),{state:e,data:r}):null},t.prototype.getCrumbs=function(t){for(var e=[],r=t?t.length:0,n=0;n<r;n++){var a=t[n];"/"!==a.substring(0,1)&&(a="/"+a);var i=this.parseLink(a),o=i.state,s=i.data;delete s[o.crumbTrailKey];var u=this.getNavigationLink(o,s,t.slice(0,n));e.push(new v(s,o,u,a,n+1===r))}return e},t}(),k=function(){function t(t,e){var r=this;this.stateHandler=new C,this.onBeforeNavigateCache=new a("beforeNavigateHandler"),this.onNavigateCache=new a("navigateHandler"),this.stateContext=new f,this.states={},this.onBeforeNavigate=function(t){return r.onBeforeNavigateCache.onEvent(t)},this.offBeforeNavigate=function(t){return r.onBeforeNavigateCache.offEvent(t)},this.onNavigate=function(t){return r.onNavigateCache.onEvent(t)},this.offNavigate=function(t){return r.onNavigateCache.offEvent(t)},t&&this.configure(t,e)}return t.prototype.configure=function(t,e){var r=this;if(this.historyManager&&this.historyManager.stop(),this.historyManager=e||new i,this.historyManager.init(function(t){void 0===t&&(t=r.historyManager.getCurrentUrl()),r.navigateLink(t,void 0,!0)}),this.isStateInfos(t)){var n=this.stateHandler.buildStates(t);this.states={};for(var a=0;a<n.length;a++)this.states[n[a].key]=n[a]}else this.stateHandler=t.stateHandler,this.states=t.states},t.prototype.isStateInfos=function(t){return!t.stateHandler},t.prototype.createStateContext=function(t,e,r,n,a,i){var o=new f;if(o.oldState=this.stateContext.state,o.oldData=this.stateContext.data,o.oldUrl=this.stateContext.url,o.state=t,o.url=n,o.asyncData=a,o.title=t.title,o.history=i,o.crumbs=r,o.data=e,o.nextCrumb=new v(e,t,n,this.stateHandler.getLink(t,e),!1),o.previousState=null,o.previousData={},o.previousUrl=null,0<o.crumbs.length){var s=o.crumbs.slice(-1)[0];o.previousState=s.state,o.previousData=s.data,o.previousUrl=s.url}return o},t.prototype.navigate=function(t,e,r){var n=this.getNavigationLink(t,e);if(null==n)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this.navigateLink(n,r)},t.prototype.getNavigationLink=function(t,e){if(!this.states[t])throw new Error(t+" is not a valid State");var r=this.stateContext,n=r.crumbs,a=r.nextCrumb;return this.stateHandler.getLink(this.states[t],e,n,a)},t.prototype.canNavigateBack=function(t){return t<=this.stateContext.crumbs.length&&0<t},t.prototype.navigateBack=function(t,e){var r=this.getNavigationBackLink(t);this.navigateLink(r,e)},t.prototype.getNavigationBackLink=function(t){if(!this.canNavigateBack(t))throw new Error("The distance parameter must be greater than zero and less than or equal to the number of Crumbs ("+this.stateContext.crumbs.length+")");return this.stateContext.crumbs[this.stateContext.crumbs.length-t].url},t.prototype.refresh=function(t,e){var r=this.getRefreshLink(t);if(null==r)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this.navigateLink(r,e)},t.prototype.getRefreshLink=function(t){var e=this.stateContext,r=e.crumbs,n=e.nextCrumb;return this.stateHandler.getLink(this.stateContext.state,t,r,n)},t.prototype.navigateLink=function(r,n,a,i){var o=this;if(void 0===n&&(n="add"),void 0===a&&(a=!1),void 0===i&&(i=function(t,e){return e()}),!a||this.stateContext.url!==r){var s=this.stateContext.url,t=this.parseLink(r),u=t.state,l=t.data,h=t.crumbs;for(var e in this.onBeforeNavigateCache.handlers){var p=this.onBeforeNavigateCache.handlers[e];if(s!==this.stateContext.url||!p(u,l,r,a,this.stateContext))return}var f=function(t){var e=o.createStateContext(u,l,h,r,t,a);s===o.stateContext.url&&i(e,function(){s===o.stateContext.url&&o.resumeNavigation(e,n)})};this.stateContext.state?this.stateContext.state.unloading(u,l,r,function(){s===o.stateContext.url&&u.navigating(l,r,f,a)},a):u.navigating(l,r,f,a)}},t.prototype.resumeNavigation=function(t,e){var r=(this.stateContext=t).oldState,n=t.state,a=t.data,i=t.asyncData,o=t.url;for(var s in this.stateContext.oldState&&this.stateContext.oldState!==n&&this.stateContext.oldState.dispose(),n.navigated(this.stateContext.data,i),this.onNavigateCache.handlers)o===this.stateContext.url&&this.onNavigateCache.handlers[s](r,n,a,i,t);o===this.stateContext.url&&("none"!==e&&this.historyManager.addHistory(o,"replace"===e),this.stateContext.title&&"undefined"!=typeof document&&(document.title=this.stateContext.title))},t.prototype.parseLink=function(t){var e=this.stateHandler.parseLink(t),r=e.state,n=e.data,a=r.crumbTrailKey,i=n[a];return{state:r,data:function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&(r[n[a]]=t[n[a]])}return r}(n,["symbol"==typeof a?a:a+""]),crumbs:i}},t.prototype.fluent=function(t){void 0===t&&(t=!1);var e=t?this.stateContext:void 0;return function i(s,u,l){function h(t,e,r,n){return t.trackCrumbTrail?(r=r.slice(),n&&r.push(n),t.truncateCrumbTrail(t,e,r)):[]}function p(t,e,r,n){var a=new f;return a.state=t,a.url=n,a.crumbs=r,a.data=e,a.nextCrumb=new v(e,t,n,u.getLink(t,e),!1),i(s,u,a)}return void 0===l&&(l=new f),{url:l.url,navigate:function(t,e){var r=s[t],n=l.crumbs,a=l.nextCrumb;if(!r)throw new Error(t+" is not a valid State");"function"==typeof e&&(e=e(l.data));var i=u.getLink(r,e,n,a);if(null==i)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");var o=c({},r.defaults,e);return p(r,o,n=h(r,o,n,a),i)},navigateBack:function(t){if(!(t<=(e=l.crumbs).length&&0<t))throw new Error("The distance parameter must be greater than zero and less than or equal to the number of Crumbs ("+l.crumbs.length+")");var e,r=e[e.length-t],n=r.state,a=r.data,i=r.url;return p(n,a,e=e.slice(0,e.length-t),i)},refresh:function(t){var e=l.state,r=l.crumbs,n=l.nextCrumb;"function"==typeof t&&(t=t(l.data));var a=u.getLink(e,t,r,n);if(null==a)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");var i=c({},e.defaults,t);return p(e,i,r=h(e,i,r,n),a)}}}(this.states,this.stateHandler,e)},t.prototype.start=function(t){this.navigateLink(null!=t?t:this.historyManager.getCurrentUrl())},t}(),T=function(){function e(t){void 0===t&&(t=""),this.navigateHistory=null,this.applicationPath="",this.disabled="undefined"==typeof window||!(window.history&&window.history.pushState),this.applicationPath=e.prependSlash(t)}return e.prototype.init=function(e){this.disabled||this.navigateHistory||(this.navigateHistory=function(t){return e(t.state||void 0)},window.addEventListener("popstate",this.navigateHistory))},e.prototype.addHistory=function(t,e){var r=this.getHref(t);this.disabled||this.getHref(this.getUrl(window.location))===r||(e?window.history.replaceState(t,null,r):window.history.pushState(t,null,r))},e.prototype.getCurrentUrl=function(){return this.getUrl(window.location)},e.prototype.getHref=function(t){if(null==t)throw new Error("The Url is invalid");return this.applicationPath+e.prependSlash(t)},e.prototype.getUrl=function(t){return t.pathname.substring(this.applicationPath.length)+t.search},e.prototype.stop=function(){this.navigateHistory&&window.removeEventListener("popstate",this.navigateHistory),this.navigateHistory=null},e.prependSlash=function(t){return t&&"/"!==t.substring(0,1)?"/"+t:t},e}();return t.State=g,t.HashHistoryManager=i,t.HTML5HistoryManager=T,t.Crumb=v,t.StateContext=f,t.StateNavigator=k,t}({});