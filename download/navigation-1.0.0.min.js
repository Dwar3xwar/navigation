!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.NavigationRouting=t()}}(function(){return function t(e,r,n){function i(o,s){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[o]={exports:{}};e[o][0].call(l.exports,function(t){var r=e[o][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e){var r=t("./Route"),n=t("./Router"),i=function(){function t(){}return t.Route=r,t.Router=n,t}();e.exports=i},{"./Route":2,"./Router":3}],2:[function(t,e){var r=t("./Segment"),n=function(){function t(t,e){this.segments=[],this.params=[],this.path=t,this.defaults=e?e:{},this.parse()}return t.prototype.parse=function(){for(var t,e=this.path.split("/").reverse(),n="",i=0;i<e.length;i++){t=new r(e[i],t?t.optional:!0,this.defaults),this.segments.unshift(t),n=t.pattern+n;for(var a=[],o=0;o<t.params.length;o++)a.push({name:t.params[o],optional:t.optional});this.params=a.concat(this.params)}this.pattern=new RegExp("^"+n+"$","i")},t.prototype.match=function(t){var e=this.pattern.exec(t);if(!e)return null;for(var r={},n=1;n<e.length;n++){var i=this.params[n-1];e[n]&&(r[i.name]=decodeURIComponent(i.optional?e[n].substring(1):e[n]))}return r},t.prototype.build=function(t){t=null!=t?t:{};for(var e="",r=!0,n=this.segments.length-1;n>=0;n--){var i=this.segments[n],a=i.build(t);if(r=r&&a.optional,!r){if(null==a.path)return null;e="/"+a.path+e}}return 0!==e.length?e:"/"},t}();e.exports=n},{"./Segment":4}],3:[function(t,e){var r=t("./Route"),n=function(){function t(){this.routes=[]}return t.prototype.addRoute=function(t,e){t="/"===t.slice(-1)?t.substring(0,t.length-1):t,t="/"===t.substring(0,1)?t.substring(1):t;var n=new r(t,e);return this.routes.push(n),n},t.prototype.match=function(t){t="/"===t.slice(-1)?t.substring(0,t.length-1):t,t="/"===t.substring(0,1)||0===t.length?t:"/"+t;for(var e=0;e<this.routes.length;e++){var r=this.routes[e],n=r.match(t);if(n){for(var i in r.defaults)n[i]||(n[i]=r.defaults[i]);return{route:r,data:n}}}return null},t}();e.exports=n},{"./Route":2}],4:[function(t,e){var r=function(){function t(t,e,r){this.params=[],this.paramsPattern=/\{([^}]+)\}/g,this.escapePattern=/[\.+*\^$\[\](){}']/g,this.path=t,this.optional=e,this.defaults=r,this.parse()}return t.prototype.parse=function(){var t=this,e=0===this.path.length,r=function(r,n){var i="?"===n.slice(-1)?n.substring(0,n.length-1):n;t.params.push(i);var a="?"===n.slice(-1)||t.defaults[i];return e=t.path.length===r.length&&a,"?"};this.pattern=this.path.replace(this.paramsPattern,r),this.optional=this.optional&&e,this.pattern=this.pattern.replace(this.escapePattern,"\\$&"),this.pattern=this.optional?this.pattern.replace(/\?/,"(/[^/]+)?"):"/"+this.pattern.replace(/\?/g,"([^/]+)")},t.prototype.build=function(t){var e=this,r=this.optional,n=!1,i=function(i,a){var o="?"===a.slice(-1)?a.substring(0,a.length-1):a;r=r&&(!t[o]||t[o]===e.defaults[o]);var s=t[o]?t[o]:e.defaults[o];return n=n||!s,encodeURIComponent(s)},a=this.path.replace(this.paramsPattern,i);return{path:n?null:a,optional:r}},t}();e.exports=r},{}]},{},[1])(1)}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Navigation=t()}}(function(){return function t(e,r,n){function i(o,s){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[o]={exports:{}};e[o][0].call(l.exports,function(t){var r=e[o][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e){var r=t("./StateContext"),n=t("./StateController"),i=t("./config/Dialog"),a=t("./config/State"),o=t("./config/Transition"),s=t("./config/StateInfoConfig"),u=t("./history/HistoryNavigator"),f=t("./history/HashHistoryManager"),l=t("./history/HTML5HistoryManager"),p=t("./Crumb"),h=t("./StateHandler"),c=t("./StateRouter"),g=t("./NavigationSettings"),d=t("./router"),v=t("./settings"),y=function(){function t(){}return t.Dialog=i,t.State=a,t.Transition=o,t.StateInfoConfig=s,t.HashHistoryManager=f,t.HTML5HistoryManager=l,t.historyManager=u.historyManager=new f,t.Crumb=p,t.NavigationSettings=g,t.StateContext=r,t.StateController=n,t.StateHandler=h,t.StateRouter=c,t.router=d,t.settings=v,t.start=function(t){u.historyManager.init(),n.navigateLink(t?t:u.historyManager.getCurrentUrl())},t}();u.navigateHistory=function(){r.url!==u.historyManager.getCurrentUrl()&&n.navigateLink(u.historyManager.getCurrentUrl())},e.exports=y},{"./Crumb":5,"./NavigationSettings":8,"./StateContext":11,"./StateController":12,"./StateHandler":13,"./StateRouter":14,"./config/Dialog":17,"./config/State":18,"./config/StateInfoConfig":19,"./config/Transition":20,"./history/HTML5HistoryManager":21,"./history/HashHistoryManager":22,"./history/HistoryNavigator":23,"./router":24,"./settings":25}],2:[function(t,e){var r=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},n=t("./TypeConverter"),i=function(t){function e(e){t.call(this),this.converter=e}return r(e,t),e.prototype.getType=function(){return this.converter.getType()+"array"},e.prototype.convertFrom=function(t){var r=[];if(0!==t.length)for(var n=t.split(e.SEPARATOR1),i=0;i<n.length;i++)r.push(0!==n[i].length?this.converter.convertFrom(n[i].replace(new RegExp(e.SEPARATOR2,"g"),e.SEPARATOR)):null);return r},e.prototype.convertTo=function(t){for(var r=[],n=t,i=0;i<n.length;i++)null!=n[i]&&r.push(this.converter.convertTo(n[i]).replace(new RegExp(e.SEPARATOR,"g"),e.SEPARATOR2));return r.join(e.SEPARATOR1)},e.SEPARATOR="-",e.SEPARATOR1="1-",e.SEPARATOR2="2-",e}(n);e.exports=i},{"./TypeConverter":16}],3:[function(t,e){var r=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},n=t("./TypeConverter"),i=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.getType=function(){return"boolean"},e.prototype.convertFrom=function(t){if("true"!==t&&"false"!==t)throw Error(t+" is not a valid boolean");return"true"===t},e.prototype.convertTo=function(t){return t.toString()},e}(n);e.exports=i},{"./TypeConverter":16}],4:[function(t,e){var r=t("./ArrayConverter"),n=t("./BooleanConverter"),i=t("./NumberConverter"),a=t("./StringConverter"),o=function(){function t(){}return t.init=function(){this.typeArray=[],this.typeArray.push(function(){return new a}),this.typeArray.push(function(){return new n}),this.typeArray.push(function(){return new i}),this.keyToConverterList={},this.typeToKeyList={};for(var t=0;t<this.typeArray.length;t++)this.keyToConverterList[t.toString()]=this.typeArray[t](),this.keyToConverterList["a"+t]=new r(this.typeArray[t]()),this.typeToKeyList[this.typeArray[t]().getType()]=t.toString(),this.typeToKeyList[new r(this.typeArray[t]()).getType()]="a"+t},t.getKey=function(t){return this.typeToKeyList[t]},t.getKeyFromObject=function(t){var e,r=typeof t;if("[object Array]"===Object.prototype.toString.call(t)){var n=t;e="string";for(var i=0;i<n.length;i++)if(null!=n[i]){e=typeof n[i];break}r=e+"array"}if(!this.typeToKeyList[r])throw new Error(r);return this.typeToKeyList[r]},t.getConverter=function(t){return this.keyToConverterList[t]},t}();o.init(),e.exports=o},{"./ArrayConverter":2,"./BooleanConverter":3,"./NumberConverter":9,"./StringConverter":15}],5:[function(t,e){var r=t("./NavigationData"),n=function(){function t(t,e,n,i){this.data=t?t:{},this.state=e,this.last=i,this.title=e.title,this.navigationLink=n,r.setDefaults(this.data,this.state.defaults)}return t}();e.exports=n},{"./NavigationData":7}],6:[function(t,e){var r=t("./Crumb"),n=t("./NavigationData"),i=t("./ReturnDataManager"),a=t("./router"),o=t("./settings"),s=t("./StateContext"),u=t("./config/StateInfoConfig"),f=function(){function t(){}return t.buildCrumbTrail=function(){var t=this.getCrumbs(!1);s.previousState&&t.push(new r(this.returnData,s.previousState,this.getHref(s.previousState,this.returnData,null),!1)),t=s.state.stateHandler.truncateCrumbTrail(s.state,t),t.reverse();for(var e="",n=0;n<t.length;n++)e+=this.CRUMB_1_SEP+t[n].state.id+this.CRUMB_2_SEP,e+=i.formatReturnData(t[n].state,t[n].data);this.crumbTrail=e?e:null},t.getCrumbs=function(t){for(var e=[],n=0,a=this.crumbTrail,o=a?a.split(this.CRUMB_1_SEP).length-1:0,s=!0;o>n;){var u=a.substring(this.CRUMB_1_SEP.length).split(this.CRUMB_2_SEP)[0],f=this.getState(u),l={},p=a.substring(a.indexOf(this.CRUMB_2_SEP)+this.CRUMB_2_SEP.length).split(this.CRUMB_1_SEP)[0];p&&(l=i.parseReturnData(p,f));var h=a.indexOf(this.CRUMB_1_SEP,1);a=-1!=h?a.substring(h):"",e.push(new r(l,f,this.getHref(f,l,null),t&&s)),s=!1,n++}return e.reverse(),e},t.getState=function(t){if(!t)return null;var e=t.split("-");return u._dialogs[+e[0]]._states[+e[1]]},t.getHref=function(t,e,r){var u={};u[o.stateIdKey]=t.id,t.trackCrumbTrail&&s.state&&(u[o.previousStateIdKey]=s.state.id),e=n.clone(e),n.setDefaults(e,t.defaults);for(var f in e)null==e[f]||!e[f].toString()||a.supportsDefaults&&e[f]===t.defaults[f]||(u[f]=i.formatURLObject(f,e[f],t));if(t.trackCrumbTrail&&s.state){var l=i.formatReturnData(s.state,r);l&&(u[o.returnDataKey]=l)}return this.crumbTrail&&t.trackCrumbTrail&&(u[o.crumbTrailKey]=this.crumbTrail),t.stateHandler.getNavigationLink(t,u)},t.getRefreshHref=function(t){return this.getHref(s.state,t,null)},t.CRUMB_1_SEP="4_",t.CRUMB_2_SEP="5_",t}();e.exports=f},{"./Crumb":5,"./NavigationData":7,"./ReturnDataManager":10,"./StateContext":11,"./config/StateInfoConfig":19,"./router":24,"./settings":25}],7:[function(t,e){var r=function(){function t(){}return t.setDefaults=function(t,e){for(var r in e)null!=t[r]&&t[r].toString()||(t[r]=e[r])},t.clone=function(t){var e={};for(var r in t)e[r]=t[r];return e},t}();e.exports=r},{}],8:[function(t,e){var r=function(){function t(){this.stateIdKey="c0",this.previousStateIdKey="c1",this.returnDataKey="c2",this.crumbTrailKey="c3",this.applicationPath=""}return t}();e.exports=r},{}],9:[function(t,e){var r=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},n=t("./TypeConverter"),i=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.getType=function(){return"number"},e.prototype.convertFrom=function(t){if(isNaN(+t))throw Error(t+" is not a valid number");return+t},e.prototype.convertTo=function(t){return t.toString()},e}(n);e.exports=i},{"./TypeConverter":16}],10:[function(t,e){var r=t("./ConverterFactory"),n=t("./router"),i=function(){function t(){}return t.formatReturnData=function(t,e){var r=[];for(var i in e)null==e[i]||!e[i].toString()||n.supportsDefaults&&e[i]===t.defaults[i]||r.push(this.encodeUrlValue(i)+this.RET_1_SEP+this.formatURLObject(i,e[i],t));return r.join(this.RET_3_SEP)},t.decodeUrlValue=function(t){return t.replace(new RegExp("0"+this.SEPARATOR,"g"),this.SEPARATOR)},t.encodeUrlValue=function(t){return t.replace(new RegExp(this.SEPARATOR,"g"),"0"+this.SEPARATOR)},t.formatURLObject=function(t,e,n){var i=n.defaultTypes[t]?n.defaultTypes[t]:"string",a=r.getKeyFromObject(e),o=r.getConverter(a).convertTo(e);return o=this.encodeUrlValue(o),typeof e!==i&&(o+=this.RET_2_SEP+a),o},t.parseURLString=function(t,e,n){var i=n.defaultTypes[t]?n.defaultTypes[t]:"string",a=e,o=r.getKey(i);if(e.indexOf(this.RET_2_SEP)>-1){var s=e.split(this.RET_2_SEP);a=s[0],o=s[1]}return r.getConverter(o).convertFrom(this.decodeUrlValue(a))},t.parseReturnData=function(t,e){for(var r={},n=t.split(this.RET_3_SEP),i=0;i<n.length;i++){var a=n[i].split(this.RET_1_SEP);r[this.decodeUrlValue(a[0])]=this.parseURLString(this.decodeUrlValue(a[0]),a[1],e)}return r},t.SEPARATOR="_",t.RET_1_SEP="1_",t.RET_2_SEP="2_",t.RET_3_SEP="3_",t}();e.exports=i},{"./ConverterFactory":4,"./router":24}],11:[function(t,e){var r=function(){function t(){}return t.includeCurrentData=function(t,e){if(!e){e=[];for(var r in this.data)e.push(r)}for(var n={},i=0;i<e.length;i++)n[e[i]]=this.data[e[i]];for(var r in t)n[r]=t[r];return n},t.clear=function(t){if(t)this.data[t]=this.state.defaults[t];else for(var e in this.data)this.data[e]=this.state.defaults[e]},t}();e.exports=r},{}],12:[function(t,e){var r=t("./CrumbTrailManager"),n=t("./history/HistoryNavigator"),i=t("./NavigationData"),a=t("./ReturnDataManager"),o=t("./router"),s=t("./settings"),u=t("./StateContext"),f=t("./config/StateInfoConfig"),l=function(){function t(){}return t.setStateContext=function(t,e){try{u.state=t,u.url=e,u.dialog=t.parent;var n=t.stateHandler.getNavigationData(t,e);u.previousState=r.getState(n[s.previousStateIdKey]),u.previousDialog=null,u.previousState&&(u.previousDialog=u.previousState.parent),r.returnData={},n[s.returnDataKey]&&(r.returnData=a.parseReturnData(n[s.returnDataKey],u.previousState)),r.crumbTrail=n[s.crumbTrailKey],u.data=this.parseData(n,t),r.buildCrumbTrail(),this.crumbs=r.getCrumbs(!0)}catch(i){throw new Error("The Url is invalid\n"+i.message)}},t.onNavigate=function(t){if(!t[this.NAVIGATE_HANDLER_ID]){var e=this.NAVIGATE_HANDLER_ID+this.navigateHandlerId++;t[this.NAVIGATE_HANDLER_ID]=e,this.navigateHandlers[e]=t}},t.offNavigate=function(t){delete this.navigateHandlers[t[this.NAVIGATE_HANDLER_ID]],delete t[this.NAVIGATE_HANDLER_ID]},t.navigate=function(t,e){var r=this.getNavigationLink(t,e);if(null==r)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this._navigateLink(r,this.getNextState(t))},t.getNavigationLink=function(t,e){return r.getHref(this.getNextState(t),e,u.data)},t.canNavigateBack=function(t){var e=!1;return t<=this.crumbs.length&&t>0&&(e=!0),e},t.navigateBack=function(t){var e=this.getNavigationBackLink(t);if(null==e)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this._navigateLink(e,this.getCrumb(t).state)},t.getNavigationBackLink=function(t){return this.getCrumb(t).navigationLink},t.refresh=function(t){var e=this.getRefreshLink(t);if(null==e)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this._navigateLink(e,u.state)},t.getRefreshLink=function(t){return r.getRefreshHref(t)},t.navigateLink=function(t){try{var e=o.getData(t.split("?")[0]).state}catch(r){throw new Error("The Url is invalid\n"+r.message)}this._navigateLink(t,e)},t._navigateLink=function(e,r){var i=this;try{var a=u.url,o=u.state,s=r.stateHandler.getNavigationData(r,e);s=this.parseData(s,r)}catch(f){throw new Error("The Url is invalid\n"+f.message)}r.navigating(s,e,function(){if(a===u.url){r.stateHandler.navigateLink(o,r,e),t.setStateContext(r,e),o&&o!==r&&o.dispose(),r.navigated(u.data);for(var s in i.navigateHandlers)e===u.url&&i.navigateHandlers[s](o,r,u.data);e===u.url&&n.historyManager.addHistory(r,e)}})},t.parseData=function(t,e){var r={};for(var n in t)n!==s.previousStateIdKey&&n!==s.returnDataKey&&n!==s.crumbTrailKey&&(r[n]=a.parseURLString(n,t[n],e));return i.setDefaults(r,e.defaults),r},t.getNextState=function(t){var e=null;if(u.state&&u.state.transitions[t]&&(e=u.state.transitions[t].to),!e&&f.dialogs[t]&&(e=f.dialogs[t].initial),!e)throw new Error("The action parameter must be a Dialog key or a Transition key that is a child of the current State");return e},t.getCrumb=function(t){if(t>this.crumbs.length||0>=t)throw new Error("The distance parameter must be greater than zero and less than or equal to the number of Crumbs ("+this.crumbs.length+")");return this.crumbs[this.crumbs.length-t]},t.NAVIGATE_HANDLER_ID="navigateHandlerId",t.navigateHandlerId=1,t.navigateHandlers={},t}();e.exports=l},{"./CrumbTrailManager":6,"./NavigationData":7,"./ReturnDataManager":10,"./StateContext":11,"./config/StateInfoConfig":19,"./history/HistoryNavigator":23,"./router":24,"./settings":25}],13:[function(t,e){var r=t("./router"),n=t("./settings"),i=function(){function t(){}return t.prototype.getNavigationLink=function(t,e){delete e[n.stateIdKey];var i=r.getRoute(t,e);if(null==i.route)return null;var a=[];for(var o in e)i.data&&null!=i.data[o]||a.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return a.length>0&&(i.route+="?"+a.join("&")),i.route},t.prototype.navigateLink=function(){},t.prototype.getNavigationData=function(t,e){var n=e.indexOf("?"),i=r.getData(0>n?e:e.substring(0,n)).data;if(i=i?i:{},n>=0)for(var a=e.substring(n+1),o=a.split("&"),s=0;s<o.length;s++){var u=o[s].split("=");i[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return i},t.prototype.truncateCrumbTrail=function(t,e){var r=[];if(t.parent.initial===t)return r;for(var n=0;n<e.length&&e[n].state!==t;n++)r.push(e[n]);return r},t}();e.exports=i},{"./router":24,"./settings":25}],14:[function(t,e){(function(t){var r="undefined"!=typeof window?window.NavigationRouting:"undefined"!=typeof t?t.NavigationRouting:null,n=function(){function t(){this.supportsDefaults=!0}return t.prototype.getData=function(t){var e=this.router.match(t);return{state:e.route._state,data:this.router.match(t).data}},t.prototype.getRoute=function(t,e){for(var r=t._route,n={},i=0;i<r.params.length;i++)n[r.params[i].name]=e[r.params[i].name];return{route:r.build(e),data:n}},t.prototype.addRoutes=function(t){this.router=new r.Router;for(var e=[],n=0;n<t.length;n++)for(var i=0;i<t[n]._states.length;i++)e.push(t[n]._states[i]);e.sort(function(t,e){var r="{"===t.route.substring(0,1)?-1:0,n="{"===e.route.substring(0,1)?-1:0;return n-r});for(var n=0;n<e.length;n++){var a=e[n];a._route=this.router.addRoute(a.route,a.formattedDefaults),a._route._state=a}},t}();e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(t,e){var r=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},n=t("./TypeConverter"),i=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.getType=function(){return"string"},e.prototype.convertFrom=function(t){return t},e.prototype.convertTo=function(t){return t.toString()},e}(n);e.exports=i},{"./TypeConverter":16}],16:[function(t,e){var r=function(){function t(){}return t.prototype.getType=function(){return null},t.prototype.convertFrom=function(){return null},t.prototype.convertTo=function(){return null},t}();e.exports=r},{}],17:[function(t,e){var r=function(){function t(){this._states=[],this.states={}}return t}();e.exports=r},{}],18:[function(t,e){var r=t("../StateHandler"),n=function(){function t(){this._transitions=[],this.transitions={},this.defaults={},this.defaultTypes={},this.formattedDefaults={},this.trackCrumbTrail=!0,this.stateHandler=new r,this.dispose=function(){},this.navigated=function(){},this.navigating=function(t,e,r){r()}}return t}();e.exports=n},{"../StateHandler":13}],19:[function(t,e){var r=t("./Dialog"),n=t("../ReturnDataManager"),i=t("../router"),a=t("./State"),o=t("./Transition"),s=function(){function t(){}return t.build=function(t){this._dialogs=[],this.dialogs={};for(var e=0;e<t.length;e++){var n=t[e],a=new r;a.index=e;for(var o in n)"states"!==o&&(a[o]=n[o]);if(!a.key)throw new Error("key is mandatory for a Dialog");if(this.dialogs[a.key])throw new Error("A Dialog with key "+a.key+" already exists");if(this._dialogs.push(a),this.dialogs[a.key]=a,this.processStates(a,n),this.processTransitions(a,n),a.initial=a.states[n.initial],!n.initial)throw new Error("initial is mandatory for a Dialog");if(!a.initial)throw new Error(a.key+" Dialog's initial key of "+n.initial+" does not match a child State key")}i.addRoutes(this._dialogs)},t.processStates=function(t,e){for(var r=0;r<e.states.length;r++){var i=e.states[r],o=new a;o.parent=t,o.index=r,o.id=t.index+"-"+o.index;for(var s in i)"transitions"!==s&&(o[s]=i[s]);for(var s in o.defaults)o.defaultTypes[s]||(o.defaultTypes[s]=typeof o.defaults[s]),o.formattedDefaults[s]=n.formatURLObject(s,o.defaults[s],o);if(!o.key)throw new Error("key is mandatory for a State");if(t.states[o.key])throw new Error("A State with key "+o.key+" already exists for Dialog "+t.key);t._states.push(o),t.states[o.key]=o}},t.processTransitions=function(t,e){for(var r=0;r<e.states.length;r++)if(e.states[r].transitions)for(var n=0;n<e.states[r].transitions.length;n++){var i=e.states[r].transitions[n],a=new o;if(a.index=n,a.key=i.key,!a.key)throw new Error("key is mandatory for a Transition");if(a.parent=t._states[r],a.to=t.states[i.to],!i.to)throw new Error("to is mandatory for a Transition");if(!a.to)throw new Error(t._states[r].key+" State's Transition to key of "+a.key+" does not match a sibling State key");if(a.parent.transitions[a.key])throw new Error("A Transition with key "+a.key+" already exists for State "+t._states[r].key);a.parent._transitions.push(a),a.parent.transitions[a.key]=a}},t._dialogs=[],t.dialogs={},t}();e.exports=s},{"../ReturnDataManager":10,"../router":24,"./Dialog":17,"./State":18,"./Transition":20}],20:[function(t,e){var r=function(){function t(){}return t}();e.exports=r},{}],21:[function(t,e){var r=t("./HistoryNavigator"),n=t("../settings"),i=function(){function t(){this.disabled="undefined"==typeof window||!(window.history&&window.history.pushState)}return t.prototype.init=function(){this.disabled||window.addEventListener("popstate",r.navigateHistory)},t.prototype.addHistory=function(t,e){t.title&&"undefined"!=typeof document&&(document.title=t.title),e=n.applicationPath+e,this.disabled||location.pathname+location.search===e||window.history.pushState(null,null,e)},t.prototype.getCurrentUrl=function(){return location.pathname.substring(n.applicationPath.length)+location.search},t.prototype.getHref=function(t){if(!t)throw new Error("The Url is invalid");return n.applicationPath+t},t.prototype.getUrl=function(t){return t.pathname.substring(n.applicationPath.length)+t.search},t}();e.exports=i},{"../settings":25,"./HistoryNavigator":23}],22:[function(t,e){var r=t("./HistoryNavigator"),n=function(){function t(){this.disabled="undefined"==typeof window||!("onhashchange"in window),this.replaceQueryIdentifier=!1}return t.prototype.init=function(){this.disabled||(window.addEventListener?window.addEventListener("hashchange",r.navigateHistory):window.attachEvent("onhashchange",r.navigateHistory))},t.prototype.addHistory=function(t,e){t.title&&"undefined"!=typeof document&&(document.title=t.title),e=this.encode(e),this.disabled||location.hash.substring(1)===e||(location.hash=e)},t.prototype.getCurrentUrl=function(){return this.decode(location.hash.substring(1))},t.prototype.getHref=function(t){if(!t)throw new Error("The Url is invalid");return"#"+this.encode(t)},t.prototype.getUrl=function(t){return this.decode(t.hash.substring(1))},t.prototype.encode=function(t){return this.replaceQueryIdentifier?t.replace("?","#"):t},t.prototype.decode=function(t){return this.replaceQueryIdentifier?t.replace("#","?"):t},t}();e.exports=n},{"./HistoryNavigator":23}],23:[function(t,e){var r=function(){function t(){}return t}();e.exports=r},{}],24:[function(t,e){var r=t("./StateRouter"),n=new r;e.exports=n},{"./StateRouter":14}],25:[function(t,e){var r=t("./NavigationSettings"),n=new r;e.exports=n},{"./NavigationSettings":8}]},{},[1])(1)});