/**
 * Navigation v5.1.0
 * (c) Graham Mendick - http://grahammendick.github.io/navigation/
 * License: Apache-2.0
 */
var Navigation=function(t){"use strict";var p=function(){function t(){this.oldState=null,this.oldData={},this.oldUrl=null,this.previousState=null,this.previousData={},this.previousUrl=null,this.state=null,this.data={},this.url=null,this.asyncData=void 0,this.title=null,this.history=!1,this.crumbs=[],this.nextCrumb=null}return t.prototype.clear=function(){this.oldState=null,this.oldData={},this.oldUrl=null,this.previousState=null,this.previousData={},this.previousUrl=null,this.state=null,this.data={},this.url=null,this.asyncData=void 0,this.title=null,this.history=!1,this.crumbs=[],this.nextCrumb=null},t.prototype.includeCurrentData=function(t,e){if(!e)for(var r in e=[],this.data)e.push(r);for(var n={},a=0;a<e.length;a++)n[e[a]]=this.data[e[a]];for(var r in t)n[r]=t[r];return n},t}(),n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function r(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t};function f(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&(r[n[a]]=t[n[a]])}return r}var c=function(t,e,r,n,a){this.data=t||{},this.state=e,this.last=a,this.title=e.title,this.url=r,this.crumblessUrl=n},a=function(){function t(t){this.handlerId=1,this.handlers={},this.name=t}return t.prototype.onEvent=function(t){if(t[this.name])throw new Error("Cannot add the same handler more than once");var e=this.name+this.handlerId++;t[this.name]=e,this.handlers[e]=t},t.prototype.offEvent=function(t){delete this.handlers[t[this.name]],delete t[this.name]},t}();var o=function(){function t(t){void 0===t&&(t=!1),this.navigateHistory=null,this.replaceQueryIdentifier=!1,this.disabled="undefined"==typeof window||!("onhashchange"in window),this.replaceQueryIdentifier=t}return t.prototype.init=function(t){this.disabled||this.navigateHistory||(this.navigateHistory=function(){return t()},window.addEventListener?window.addEventListener("hashchange",this.navigateHistory):window.attachEvent("onhashchange",this.navigateHistory))},t.prototype.addHistory=function(t,e){var r=this.getHref(t);this.disabled||window.location.hash===r||(e?window.location.replace(r):window.location.hash=r)},t.prototype.getCurrentUrl=function(){return this.getUrl(window.location)},t.prototype.getHref=function(t){if(null==t)throw new Error("The Url is invalid");return"#"+this.encode(t)},t.prototype.getUrl=function(t){return this.decode(t.hash.substring(1))},t.prototype.stop=function(){this.navigateHistory&&(window.removeEventListener?window.removeEventListener("hashchange",this.navigateHistory):window.detachEvent("onhashchange",this.navigateHistory)),this.navigateHistory=null},t.prototype.encode=function(t){return this.replaceQueryIdentifier?t.replace("?","#"):t},t.prototype.decode=function(t){return this.replaceQueryIdentifier?t.replace("#","?"):t},t}(),e=function(){function t(t,e){this.key=t,this.name=e}return t.prototype.convertFrom=function(t,e){return void 0===e&&(e=!1),null},t.prototype.convertTo=function(t){return null},t}(),s=function(n){function o(t,e){var r=n.call(this,e,t.name+"array")||this;return r.converter=t,r}return r(o,n),o.prototype.convertFrom=function(t,e){var r=[];if("string"==typeof t)if(e){if(0===t.length)throw new Error("Empty string is not a valid array item");r.push(this.converter.convertFrom(t))}else for(var n=t.split(o.SEPARATOR),a=0;a<n.length;a++){if(0===n[a].length)throw new Error("Empty string is not a valid array item");r.push(this.converter.convertFrom(n[a].replace(/0-/g,"-")))}else for(a=0;a<t.length;a++){if(0===t[a].length)throw new Error("Empty string is not a valid array item");r.push(this.converter.convertFrom(t[a]))}return r},o.prototype.convertTo=function(t){for(var e=[],r=[],n=0;n<t.length;n++){if(null==t[n]||!t[n].toString())throw new Error("Invalid navigation data, arrays cannnot contain null, undefined or empty string");var a=this.converter.convertTo(t[n]).val;r.push(a),e.push(a.replace(/-/g,"0-"))}return{val:e.join(o.SEPARATOR),arrayVal:r}},o.SEPARATOR="1-",o}(e),u=function(e){function t(t){return e.call(this,t,"boolean")||this}return r(t,e),t.prototype.convertFrom=function(t){if("true"!==t&&"false"!==t)throw new Error(t+" is not a valid boolean");return"true"===t},t.prototype.convertTo=function(t){return{val:""+t}},t}(e),l=function(e){function t(t){return e.call(this,t,"date")||this}return r(t,e),t.prototype.convertFrom=function(t){var e=t.split("-");if(3!==e.length)throw new Error(t+" is not a valid date");var r=new Date(+e[0],+e[1]-1,+e[2]);if(isNaN(+r))throw new Error(t+" is not a valid date");return r},t.prototype.convertTo=function(t){return{val:t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},t}(e),h=function(e){function t(t){return e.call(this,t,"number")||this}return r(t,e),t.prototype.convertFrom=function(t){if(isNaN(+t))throw new Error(t+" is not a valid number");return+t},t.prototype.convertTo=function(t){return{val:""+t}},t}(e),v=function(e){function t(t){return e.call(this,t,"string")||this}return r(t,e),t.prototype.convertFrom=function(t){if("string"!=typeof t)throw new Error(t+" is not a valid string");return t},t.prototype.convertTo=function(t){return{val:""+t}},t}(e),d=function(){function t(){this.keyToConverterList={},this.nameToConverterList={};for(var t=[new v("0"),new u("1"),new h("2"),new l("3")],e=0;e<t.length;e++){var r=t[e],n=new s(r,"a"+r.key);this.keyToConverterList[r.key]=this.nameToConverterList[r.name]=r,this.keyToConverterList[n.key]=this.nameToConverterList[n.name]=n}}return t.prototype.getConverterFromKey=function(t){return this.keyToConverterList[t]},t.prototype.getConverterFromName=function(t){var e=this.nameToConverterList[t];if(!e)throw new Error("No TypeConverter found for "+t);return e},t}(),g=function(){function l(){this.converterFactory=new d}return l.prototype.formatData=function(t,e,r){var n={},a={};for(var o in e){var i=e[o];null!=i&&0!==i.length&&this.formatDataItem(t,o,i,n,a)}return t.trackCrumbTrail&&0<r.length&&this.formatDataItem(t,t.crumbTrailKey,r,n,a),{data:n,arrayData:a}},l.prototype.formatDataItem=function(t,e,r,n,a){var o=this.formatURLObject(e,r,t);(r=o.val)!==t.formattedDefaults[e]&&(n[e]=r,a[e]=o.arrayVal)},l.decodeUrlValue=function(t){return t.replace(/0_/g,"_")},l.encodeUrlValue=function(t){return t.replace(/_/g,"0_")},l.prototype.formatURLObject=function(t,e,r,n){void 0===n&&(n=!1),n=n||r.trackTypes;var a=r.defaultTypes[t]||"string",o=this.getConverter(e),i=o.convertTo(e),s=i.val,u=i.arrayVal;return n&&(s=l.encodeUrlValue(s),u&&(u[0]=l.encodeUrlValue(u[0]))),r.trackTypes&&o.name!==a&&(s+=l.SEPARATOR+o.key,u&&(u[0]=u[0]+l.SEPARATOR+o.key)),{val:s,arrayVal:u}},l.prototype.parseData=function(t,e,r){var n={};for(var a in t)l.isDefault(a,t,e,!!r[a])||(n[a]=this.parseURLString(a,t[a],e,!1,!!r[a]));for(var a in e.defaults)null!=n[a]&&n[a].toString()||(n[a]=e.defaults[a]);return n},l.isDefault=function(t,e,r,n){var a=e[t],o=r.formattedArrayDefaults[t];if(n&&o){if("string"==typeof a&&(a=[a]),a.length!==o.length)return!1;for(var i=0;i<a.length;i++)if(a[i]!==o[i])return!1;return!0}return a===r.formattedDefaults[t]},l.prototype.parseURLString=function(t,e,r,n,a){void 0===n&&(n=!1),void 0===a&&(a=!1),n=n||r.trackTypes;var o=r.defaultTypes[t]||"string",i="string"==typeof e?e:e[0],s=this.converterFactory.getConverterFromName(o).key;if(r.trackTypes&&-1<i.indexOf(l.SEPARATOR)){var u=i.split(l.SEPARATOR);i=u[0],s=u[1]}return n&&(i=l.decodeUrlValue(i)),"string"==typeof e?e=i:e[0]=i,this.converterFactory.getConverterFromKey(s).convertFrom(e,a)},l.prototype.getConverter=function(t){var e=l.getTypeName(t);if("array"===e){for(var r=t,n="string",a=0;a<r.length;a++)if(null!=r[a]&&r[a].toString()){n=l.getTypeName(r[a]);break}e=n+e}return this.converterFactory.getConverterFromName(e)},l.getTypeName=function(t){var e=typeof t;return"object"===e&&(e=(e=Object.prototype.toString.call(t)).substring(8,e.length-1).toLowerCase()),e},l.SEPARATOR="1_",l}(),y=function(){function t(){this.defaults={},this.defaultTypes={},this.formattedDefaults={},this.formattedArrayDefaults={},this.trackCrumbTrail=!1,this.trackTypes=!0}return t.prototype.unloading=function(t,e,r,n,a){n()},t.prototype.navigating=function(t,e,r,n){r()},t.prototype.dispose=function(){},t.prototype.navigated=function(t,e){},t.prototype.urlEncode=function(t,e,r,n,a){return encodeURIComponent(r)},t.prototype.urlDecode=function(t,e,r,n){return decodeURIComponent(r)},t.prototype.validate=function(t){return!0},t.prototype.truncateCrumbTrail=function(t,e,r){return r},t}(),m=function(){function t(t,e,r){this.pattern="",this.params=[],this.subSegments=[],this.subSegmentPattern=/[{]{0,1}[^{}]+[}]{0,1}/g,this.escapePattern=/[\.+*\^$\[\](){}']/g,this.path=t,this.optional=e,this.parse(r)}return t.prototype.parse=function(t){if(0!==this.path.length){for(var e=this.path.match(this.subSegmentPattern),r=0;r<e.length;r++){var n=e[r];if("{"===n.slice(0,1)){var a=n.substring(1,n.length-1),o="?"===a.slice(-1),i="*"===a.slice(0,1),s=o?a.slice(0,-1):a;s=i?s.slice(1):s,this.params.push({name:s,splat:i}),this.optional=this.optional&&o&&this.path.length===n.length,this.path.length===n.length&&(o=this.optional),this.subSegments.push({name:s,param:!0,splat:i,optional:o});var u=i?".+":"[^/]+";this.pattern+=this.optional?"(/"+u+")":"("+u+")",this.pattern+=o?"?":""}else this.optional=!1,this.subSegments.push({name:n,param:!1,splat:!1,optional:!1}),this.pattern+=n.replace(this.escapePattern,"\\$&")}this.optional||(this.pattern="/"+this.pattern)}},t.prototype.build=function(t,e,r){for(var n="",a=!1,o=!1,i=0;i<this.subSegments.length;i++){var s=this.subSegments[i];if(s.param){var u=t[s.name],l=e[s.name];if(o=s.optional&&(!u||u===l),(this.optional||!o)&&(u=u||l,a=a||!u,u))if(s.splat&&"string"!=typeof u){var h=[];for(i=0;i<u.length;i++)h[i]=r(s.name,u[i]);n+=h.join("/")}else n+=r(s.name,u)}else n+=s.name}return{path:a?null:n,optional:o&&this.optional}},t}(),b=function(){function t(t,e){this.segments=[],this.params=[],this.path=t,this.defaults=e||{},this.parse()}return t.prototype.parse=function(){for(var t,e=this.path.split("/").reverse(),r="",n=0;n<e.length;n++){t=new m(e[n],!t||t.optional,this.defaults),this.segments.unshift(t),r=t.pattern+r;for(var a=[],o=0;o<t.params.length;o++){var i=t.params[o];a.push({name:i.name,optional:t.optional,splat:i.splat})}this.params=a.concat(this.params)}this.pattern=new RegExp("^"+r+"$","i")},t.prototype.match=function(t,e){var r=this.pattern.exec(t);if(!r)return null;for(var n={},a=1;a<r.length;a++){var o=this.params[a-1];if(r[a]){var i=o.optional?r[a].substring(1):r[a];if(-1===i.indexOf("/"))n[o.name]=e(this,o.name,i);else{for(var s=i.split("/"),u=[],l=0;l<s.length;l++)u[l]=e(this,o.name,s[l]);n[o.name]=u}}}return n},t.prototype.build=function(t,n){var a=this;t=t||{};for(var e="",r=!0,o=!1,i=this.segments.length-1;0<=i;i--){var s=this.segments[i].build(t,this.defaults,function(t,e){var r=n(a,t,e);return o=o||!r,r});if(o)return null;if(!(r=r&&s.optional)){if(null==s.path)return null;e="/"+s.path+e}}return 0!==e.length?e:"/"},t}(),w=function(){function t(){this.routes=[]}return t.prototype.addRoute=function(t,e){t="/"===(t="/"===t.slice(-1)?t.substring(0,t.length-1):t).substring(0,1)?t.substring(1):t;var r=new b(t,e);return this.routes.push(r),r},t.prototype.match=function(t,e,r){t="/"===(t="/"===t.slice(-1)?t.substring(0,t.length-1):t).substring(0,1)||0===t.length?t:"/"+t;for(var n=!e,a=0;a<this.routes.length;a++){var o=this.routes[a];if(n){var i=o.match(t,r);if(i)return{route:o,data:i}}else n=o===e}return null},t.prototype.sort=function(t){this.routes.sort(t)},t}(),C=function(){function c(){}return c.prototype.getData=function(t,e){var r=this.router.match(t,e,c.urlDecode);if(!r)return null;var n={},a=r.route,o=r.route,i=o._splat,s=o._state,u=o.params,l=r.data;if(i)for(var h=0;h<u.length;h++){var p=u[h];p.splat&&(n[p.name]=!0)}return{state:s,data:l,separableData:n,route:a}},c.prototype.getRoute=function(t,e,r){void 0===r&&(r={});var n=t._routeInfo,a="";for(var o in n.params)e[o]&&(a+=n.params[o]+",");a=a.slice(0,-1);var i=n.matches[a],s=null;if(i){var u=c.getCombinedData(i.route,e,r);s=i.route.build(u,c.urlEncode)}else{var l=c.findBestMatch(n.routes,e,r);l&&(s=l.routePath,i={route:l.route,data:l.data},n.matches[a]=i)}return{route:s,data:i?i.data:{}}},c.findBestMatch=function(t,e,r){for(var n,a=-1,o=-1,i=0;i<t.length;i++){var s=t[i],u=c.getCombinedData(s,e,r),l=s.build(u,c.urlEncode);if(l){for(var h=0,p={},f=0;f<s.params.length;f++)u[s.params[f].name]&&(p[s.params[f].name]={},h++);(a<h||h===a&&s.params.length<o)&&(n={route:s,data:p,routePath:l},a=h,o=s.params.length)}}return n},c.getCombinedData=function(t,e,r){if(!t._splat)return e;var n={};for(var a in e)n[a]=e[a];for(var o=0;o<t.params.length;o++){var i=t.params[o],s=r[i.name];i.splat&&s&&(n[i.name]=s)}return n},c.urlEncode=function(t,e,r){var n=t._state;return n.urlEncode(n,e,r,!1)},c.urlDecode=function(t,e,r){var n=t._state;return n.urlDecode(n,e,r,!1)},c.prototype.addRoutes=function(t){this.router=new w;for(var e=0;e<t.length;e++)this.addStateRoutes(t[e])},c.prototype.addStateRoutes=function(t){for(var e={routes:[],params:{},matches:{}},r=0,n=c.getRoutes(t),a=0;a<n.length;a++){for(var o=this.router.addRoute(n[a],t.formattedDefaults),i=!1,s=0;s<o.params.length;s++){var u=o.params[s];e.params[u.name]||(e.params[u.name]=r,r++),i=i||u.splat}e.routes.push(o),o._state=t,o._splat=i,o.defaults=c.getCombinedData(o,t.formattedDefaults,t.formattedArrayDefaults)}t._routeInfo=e},c.getRoutes=function(t){var e=[],r=t.route;if("string"==typeof r)e=e.concat(c.expandRoute(r));else for(var n=0;n<r.length;n++)e=e.concat(c.expandRoute(r[n]));return e},c.expandRoute=function(t){for(var e=[],r=t.split("+"),n="",a=0;a<r.length;a++)n+=r[a],e.push(n);return e},c}(),k=function(){function t(){this.navigationDataManager=new g,this.router=new C}return t.prototype.buildStates=function(t){for(var e=[],r={},n=0;n<t.length;n++){var a=t[n],o=new y;for(var i in a)o[i]=a[i];if(!o.key)throw new Error("State key is mandatory");if(null==o.route&&(o.route=o.key),o.trackCrumbTrail){o.trackCrumbTrail=!0,o.crumbTrailKey="crumb";var s=a.trackCrumbTrail;"string"==typeof s&&(o.crumbTrailKey=s),o.defaultTypes[o.crumbTrailKey]="stringarray"}for(var i in o.defaults){o.defaultTypes[i]||(o.defaultTypes[i]=this.navigationDataManager.getConverter(o.defaults[i]).name);var u=this.navigationDataManager.formatURLObject(i,o.defaults[i],o);o.formattedDefaults[i]=u.val,u.arrayVal&&(o.formattedArrayDefaults[i]=u.arrayVal)}if(r[o.key])throw new Error("A State with key "+o.key+" already exists");r[o.key]=!0,e.push(o)}return this.router.addRoutes(e),e},t.prototype.getLink=function(t,e,r,n){var a=[];if(r){r=r.slice(),n&&r.push(n),r=t.truncateCrumbTrail(t,i({},t.defaults,e),r);for(var o=0;o<r.length;o++)a.push(r[o].crumblessUrl)}return this.getNavigationLink(t,e,a)},t.prototype.getNavigationLink=function(t,e,r){var n=this.navigationDataManager.formatData(t,e,r),a=n.data,o=n.arrayData,i=this.router.getRoute(t,a,o);if(null==i.route)return null;var s=[];for(var u in a)if(!i.data[u]){var l=o[u];if(l)for(var h=0;h<l.length;h++){p=t.urlEncode(t,null,u,!0,h),f=t.urlEncode(t,u,l[h],!0);s.push(p+(f?"="+f:""))}else{var p=t.urlEncode(t,null,u,!0),f=t.urlEncode(t,u,a[u],!0);s.push(p+(f?"="+f:""))}}return 0<s.length&&(i.route+="?"+s.join("&")),i.route},t.prototype.parseLink=function(t,e,r){void 0===r&&(r="");var n=t.indexOf("?"),a=n<0?t:t.substring(0,n),o=0<=n?t.substring(n+1):null,i=this.router.getData(a,e);if(!i)throw new Error("The Url "+t+" is invalid"+(r||"\nNo match found"));var s=i.state,u=i.data,l=i.separableData,h=i.route;try{var p=this.getNavigationData(o,s,u||{},l)}catch(t){r+="\n"+t.message}return p||this.parseLink(t,h,r)},t.prototype.getNavigationData=function(t,e,r,n){if(t)for(var a=t.split("&"),o=0;o<a.length;o++){var i=a[o].split("="),s=e.urlDecode(e,null,i[0],!0),u=e.urlDecode(e,s,i[1]||"",!0);n[s]=!0;var l=r[s];l?("string"==typeof l&&(r[s]=l=[l]),l.push(u)):r[s]=u}var h=(r=this.navigationDataManager.parseData(r,e,n))[e.crumbTrailKey];return delete r[e.crumbTrailKey],e.validate(r)?(r[e.crumbTrailKey]=this.getCrumbs(h),{state:e,data:r}):null},t.prototype.getCrumbs=function(t){for(var e=[],r=t?t.length:0,n=0;n<r;n++){var a=t[n];"/"!==a.substring(0,1)&&(a="/"+a);var o=this.parseLink(a),i=o.state,s=o.data;delete s[i.crumbTrailKey];var u=this.getNavigationLink(i,s,t.slice(0,n));e.push(new c(s,i,u,a,n+1===r))}return e},t}(),T=function(){function t(t,e){var r=this;this.stateHandler=new k,this.onBeforeNavigateCache=new a("beforeNavigateHandler"),this.onNavigateCache=new a("navigateHandler"),this.stateContext=new p,this.states={},this.onBeforeNavigate=function(t){return r.onBeforeNavigateCache.onEvent(t)},this.offBeforeNavigate=function(t){return r.onBeforeNavigateCache.offEvent(t)},this.onNavigate=function(t){return r.onNavigateCache.onEvent(t)},this.offNavigate=function(t){return r.onNavigateCache.offEvent(t)},t&&this.configure(t,e)}return t.prototype.configure=function(t,e){var r=this;if(this.historyManager&&this.historyManager.stop(),this.historyManager=e||new o,this.historyManager.init(function(t){void 0===t&&(t=r.historyManager.getCurrentUrl()),r.navigateLink(t,void 0,!0)}),this.isStateInfos(t)){var n=this.stateHandler.buildStates(t);this.states={};for(var a=0;a<n.length;a++)this.states[n[a].key]=n[a]}else this.stateHandler=t.stateHandler,this.states=t.states},t.prototype.isStateInfos=function(t){return!t.stateHandler},t.prototype.createStateContext=function(t,e,r,n,a,o){var i=new p;if(i.oldState=this.stateContext.state,i.oldData=this.stateContext.data,i.oldUrl=this.stateContext.url,i.state=t,i.url=n,i.asyncData=a,i.title=t.title,i.history=o,i.crumbs=r,i.data=e,i.nextCrumb=new c(e,t,n,this.stateHandler.getLink(t,e),!1),i.previousState=null,i.previousData={},i.previousUrl=null,0<i.crumbs.length){var s=i.crumbs.slice(-1)[0];i.previousState=s.state,i.previousData=s.data,i.previousUrl=s.url}return i},t.prototype.navigate=function(t,e,r){var n=this.getNavigationLink(t,e);if(null==n)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this.navigateLink(n,r)},t.prototype.getNavigationLink=function(t,e){if(!this.states[t])throw new Error(t+" is not a valid State");var r=this.stateContext,n=r.crumbs,a=r.nextCrumb;return this.stateHandler.getLink(this.states[t],e,n,a)},t.prototype.canNavigateBack=function(t){return t<=this.stateContext.crumbs.length&&0<t},t.prototype.navigateBack=function(t,e){var r=this.getNavigationBackLink(t);this.navigateLink(r,e)},t.prototype.getNavigationBackLink=function(t){if(!this.canNavigateBack(t))throw new Error("The distance parameter must be greater than zero and less than or equal to the number of Crumbs ("+this.stateContext.crumbs.length+")");return this.stateContext.crumbs[this.stateContext.crumbs.length-t].url},t.prototype.refresh=function(t,e){var r=this.getRefreshLink(t);if(null==r)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this.navigateLink(r,e)},t.prototype.getRefreshLink=function(t){var e=this.stateContext,r=e.crumbs,n=e.nextCrumb;return this.stateHandler.getLink(this.stateContext.state,t,r,n)},t.prototype.navigateLink=function(r,n,a,o){var i=this;if(void 0===n&&(n="add"),void 0===a&&(a=!1),void 0===o&&(o=function(t,e){return e()}),!a||this.stateContext.url!==r){var s=this.stateContext.url,t=this.parseLink(r),u=t.state,l=t.data,h=t.crumbs;for(var e in this.onBeforeNavigateCache.handlers){var p=this.onBeforeNavigateCache.handlers[e];if(s!==this.stateContext.url||!p(u,l,r,a,this.stateContext))return}var f=function(t){var e=i.createStateContext(u,l,h,r,t,a);s===i.stateContext.url&&o(e,function(){s===i.stateContext.url&&i.resumeNavigation(e,n)})};this.stateContext.state?this.stateContext.state.unloading(u,l,r,function(){s===i.stateContext.url&&u.navigating(l,r,f,a)},a):u.navigating(l,r,f,a)}},t.prototype.resumeNavigation=function(t,e){var r=(this.stateContext=t).oldState,n=t.state,a=t.data,o=t.asyncData,i=t.url;for(var s in this.stateContext.oldState&&this.stateContext.oldState!==n&&this.stateContext.oldState.dispose(),n.navigated(this.stateContext.data,o),this.onNavigateCache.handlers)i===this.stateContext.url&&this.onNavigateCache.handlers[s](r,n,a,o,t);i===this.stateContext.url&&("none"!==e&&this.historyManager.addHistory(i,"replace"===e),this.stateContext.title&&"undefined"!=typeof document&&(document.title=this.stateContext.title))},t.prototype.parseLink=function(t){var e=this.stateHandler.parseLink(t),r=e.state,n=e.data,a=r.crumbTrailKey,o=n[a];return{state:r,data:f(n,["symbol"==typeof a?a:a+""]),crumbs:o}},t.prototype.fluent=function(t){void 0===t&&(t=!1);var e=t?this.stateContext:void 0;return function u(l,h,n){function a(t){var e=h.parseLink(t),r=e.state,n=i=e.data,a=r.crumbTrailKey,o=n[a],i=f(n,["symbol"==typeof a?a:a+""]),s=new p;return s.state=r,s.url=t,s.crumbs=o,s.data=i,s.nextCrumb=new c(i,r,t,h.getLink(r,i),!1),u(l,h,s)}return void 0===n&&(n=new p),{url:n.url,navigate:function(t,e){if(!l[t])throw new Error(t+" is not a valid State");"function"==typeof e&&(e=e(n.data));var r=h.getLink(l[t],e,n.crumbs,n.nextCrumb);if(null==r)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");return a(r)},navigateBack:function(t){if(!(t<=n.crumbs.length&&0<t))throw new Error("The distance parameter must be greater than zero and less than or equal to the number of Crumbs ("+n.crumbs.length+")");return a(n.crumbs[n.crumbs.length-t].url)},refresh:function(t){"function"==typeof t&&(t=t(n.data));var e=h.getLink(n.state,t,n.crumbs,n.nextCrumb);if(null==e)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");return a(e)}}}(this.states,this.stateHandler,e)},t.prototype.start=function(t){this.navigateLink(null!=t?t:this.historyManager.getCurrentUrl())},t}(),E=function(){function e(t){void 0===t&&(t=""),this.navigateHistory=null,this.applicationPath="",this.disabled="undefined"==typeof window||!(window.history&&window.history.pushState),this.applicationPath=e.prependSlash(t)}return e.prototype.init=function(e){this.disabled||this.navigateHistory||(this.navigateHistory=function(t){return e(t.state||void 0)},window.addEventListener("popstate",this.navigateHistory))},e.prototype.addHistory=function(t,e){var r=this.getHref(t);this.disabled||this.getHref(this.getUrl(window.location))===r||(e?window.history.replaceState(t,null,r):window.history.pushState(t,null,r))},e.prototype.getCurrentUrl=function(){return this.getUrl(window.location)},e.prototype.getHref=function(t){if(null==t)throw new Error("The Url is invalid");return this.applicationPath+e.prependSlash(t)},e.prototype.getUrl=function(t){return t.pathname.substring(this.applicationPath.length)+t.search},e.prototype.stop=function(){this.navigateHistory&&window.removeEventListener("popstate",this.navigateHistory),this.navigateHistory=null},e.prependSlash=function(t){return t&&"/"!==t.substring(0,1)?"/"+t:t},e}();return t.State=y,t.HashHistoryManager=o,t.HTML5HistoryManager=E,t.Crumb=c,t.StateContext=p,t.StateNavigator=T,t}({});