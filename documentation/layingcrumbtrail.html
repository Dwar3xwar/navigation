<html>
<head>
    <title>Laying a Crumb Trail</title>
    <meta name="viewport" content="width=device-width">
    <link href="../github.css" rel="stylesheet" />
    <link href="documentation.css" rel="stylesheet" />
</head>
<body>
    <div id="header">
        <div id="banner">
            <a id="home" href="../index.html">Navigation</a>
            <a href="../tutorial/configuringstates.html">Tutorial</a>
            <a href="../example/angular/navigation.html">Examples</a>
            <a href="../download/index.html">Download</a>
            <a class="active" href="configuring.html">Documentation</a>
            <a href="https://github.com/grahammendick/navigation">GitHub Source</a>
        </div>
    </div>
    <div id="content">
        <div id="nav">
            <h3></h3>
            <ul>
                <li><a href="configuring.html">Configuring</a></li>
                <li><a href="changingstate.html">Changing State</a></li>
                <li><a href="changingdata.html">Changing Data</a></li>
                <li><a href="rememberingdata.html">Remembering Data</a></li>
                <li><a href="handlingnavigation.html">Handling Navigation</a></li>
                <li><a href="settingdatadefaults.html">Setting Data Defaults</a></li>
                <li><a href="hyperlinking.html">Hyperlinking</a></li>
                <li>
                    Working With:
                    <ul>
                        <li><a href="workingwith/angular.html">Angular</a></li>
                        <li><a href="workingwith/knockout.html">Knockout</a></li>
                        <li><a href="workingwith/react.html">React</a></li>
                    </ul>
                </li>
                <li><a href="unloadingviews.html">Unloading Views</a></li>
                <li><a href="managinghistory.html">Managing History</a></li>
                <li><a href="navigatingisomorphically.html">Navigating Isomorphically</a></li>
                <li class="active"><a href="layingcrumbtrail.html">Laying a Crumb Trail</a></li>
            </ul>
        </div>
        <div id="doc">
            <h1>Laying a Crumb Trail</h1>
            <p>
                Navigation keeps track of States and data as you navigate, dynamically building a breadcrumb trail. <a href="changingstate.html#back">Back navigation</a> 
                allows you to travel any distance along this trail, returning to previously visited States with their data intact. Because the breadcrumb 
                trail is stored in the Url, back navigation works even when Urls are bookmarked or Hyperlinks are opened in new tabs.
            </p>
            <h2>Truncation</h2>
            <p>
                There are two truncation rules in place that keep the length of a breadcrumb trail in check:
            </p>
            <ol>
                <li>Navigating to a new Dialog removes all breadcrumbs</li>
                <li>Navigating to a State already in the trail removes the subsequent breadcrumbs</li>
            </ol>
            <p>
                You can implement your own breadcrumb trail truncation rules. Do so with care, because without the second rule the breadcrumb trail would
                get longer rather than shorter when navigating back.
            </p>
            <p>
                In the email example application, after composing a new email, you might want to navigate the user back to the mail they were just viewing. 
                The first truncation rule prevents this because composing a mail appears in a different Dialog to viewing a mail. To remove this restriction, 
                create a custom truncation function that implements the second rule but omits the first and assign it to the 'new' State of the 'compose' Dialog.
                <pre><code class="javascript">var compose = Navigation.StateInfoConfig.dialogs.compose;
var stateHandler = compose.states.new.stateHandler;
stateHandler.truncateCrumbTrail = function(state, crumbs) {
    // The second rule only
    var newCrumbs = [];
    for (var i = 0; i < crumbs.length; i++) {
        if (crumbs[i].state === state)
            break;
        newCrumbs.push(crumbs[i]);
    }
    return newCrumbs;
}
</code></pre>
            </p>
            <h2>Storage</h2>
            <p>
                Despite these truncation rules, the breadcrumb trail can still reach a length that makes storing it in the Url impractical.
 You can configure an alternate storage mechanism that will kick in once the trail breaches a certain length:
                <pre><code class="javascript">Navigation.settings.crumbTrailPersister = new StorageCrumbTrailPersister(100);
</code></pre>
            </p>
            <p>
                Once the trail length exceeds 100 it'll be stored in localStorage and a key placed in the Url instead. Be aware that using localStorage 
                makes back navigation less reliable. For example, back navigation won't work as expected if the Url is shared.
            </p>
        </div>
    </div>
    <script src="../highlight.pack.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>
</body>
</html>