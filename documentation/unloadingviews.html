<html>
<head>
    <title>Unloading Views</title>
    <link href="../github.css" rel="stylesheet" />
    <link href="documentation.css" rel="stylesheet" />
</head>
<body>
    <div id="header">
        <div id="banner">
            <a id="home" href="../index.html">Navigation</a>
            <a href="../tutorial/configuringstates.html">Tutorial</a>
            <a href="../example/angular/navigation.html">Examples</a>
            <a href="../download/index.html">Download</a>
            <a class="active" href="configuring.html">Documentation</a>
            <a href="https://github.com/grahammendick/navigation">GitHub Source</a>
        </div>
    </div>
    <div id="content">
        <div id="nav">
            <h3></h3>
            <ul>
                <li><a href="configuring.html">Configuring</a></li>
                <li><a href="changingstate.html">Changing State</a></li>
                <li><a href="changingdata.html">Changing Data</a></li>
                <li><a href="rememberingdata.html">Remembering Data</a></li>
                <li><a href="handlingnavigation.html">Handling Navigation</a></li>
                <li><a href="settingdatadefaults.html">Setting Data Defaults</a></li>
                <li><a href="hyperlinking.html">Hyperlinking</a></li>
                <li>
                    Working With:
                    <ul>
                        <li><a href="workingwith/angular.html">Angular</a></li>
                        <li><a href="workingwith/knockout.html">Knockout</a></li>
                        <li><a href="workingwith/react.html">React</a></li>
                    </ul>
                </li>
                <li class="active"><a href="unloadingviews.html">Unloading Views</a></li>
                <li><a href="managinghistory.html">Managing History</a></li>
                <li><a href="layingcrumbtrail.html">Laying a Crumb Trail</a></li>
            </ul>
        </div>
        <div id="doc">
            <h1>Unloading Views</h1>
            <p>
                <a href="handlingnavigation.html">State Navigators</a> are created to load data and views. They are functions attached to States that are
                called at various points in the lifecycle of a navigation. There are other functions that make up a State Navigator that help with the
                unloading of data and views. These functions are called on the exited State rather than the one being visited.
            </p>
            <p>
                When a user selects a mail, as well as showing the details view, you need to hide the inbox. You can assign a function to the dispose property
                of a State that gets called whenever that State is navigated away from. When a user selects a mail, the 'listing' State's dispose function is
                called, followed by the 'details' State's navigated function. Paging through the inbox won't trigger the dispose function because a refresh
                navigation doesn't change States.
                <pre><code class="javascript">var listing = inbox.states.listing;
listing.dispose = function() {
    // Hide the inbox
}
</code></pre>
            </p>
            <p>
                If a user selects to return to their inbox in the middle of editing a mail, you might want to give them a chance to cancel the navigation and
                finish editing. Adding an unloading function to the 'details' State automatically cancels the navigation. To continue with the navigation you
                must call the unload function that's passed in.
                <pre><code class="javascript">var details = inbox.states.details;
details.unloading = function(state, data, url, unload, history) {
    if (history || confirm('Are you sure?')) {
        // Continue the navigation
        unload();
    }
}</code></pre>
            </p>
            <p>
                Notice that the navigation isn't cancelled if the history parameter is true. This flag indicates whether the navigation was triggered by the
                browser history button. With browser history navigation the Url changes before the navigation takes place, so it feels right to let it continue.
                However, if you want to cancel it, you should reset the Url by calling <code>Navigation.settings.historyManager.addHistory(null, null)</code>.
            </p>
        </div>
    </div>
    <script src="../highlight.pack.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>
</body>
</html>