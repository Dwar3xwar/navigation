<html>
<head>
    <title>Managing History</title>
    <link href="../../github.css" rel="stylesheet" />
    <link href="../documentation.css" rel="stylesheet" />
</head>
<body>
    <div id="header">
        <div id="banner">
            <a id="home" href="../../index.html">Navigation</a>
            <a href="../../tutorial/configuringstates.html">Tutorial</a>
            <a href="../../example/angular/navigation.html">Examples</a>
            <a href="../../download/index.html">Download</a>
            <a class="active" href="../historymanagement.html">Documentation</a>
            <a href="https://github.com/grahammendick/navigation">GitHub Source</a>
        </div>
    </div>
    <div id="content">
        <div id="nav">
            <h3></h3>
            <ul>
                <li><a href="../configuring.html">Configuring</a></li>
                <li><a href="../changingstate.html">Changing State</a></li>
                <li><a href="../managinghistory.html">Managing History</a></li>
                <li>
                    Customising
                    <ul>
                        <li><a href="routing.html">Routing</a></li>
                        <li class="active"><a href="history.html">History</a></li>
                        <li><a href="hyperlinks.html">Hyperlinks</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div id="doc">
            <h1>Customising History</h1>
            <p>
                If you don't like Navigation's opinions on history management then you can implement your own history manager. Here's a history
                manager that uses HTML5 history's replaceState for the listing State and pushState for all the others.
            </p>
            <pre><code class="javascript">Navigation.settings.historyManager = {
    init: function(){
        // Listen for Url changes and navigate when it does
        window.addEventListener('popstate', function(){
            Navigation.StateController.navigateLink(location.pathname + location.search);
        });
    },
    addHistory: function(state, url){
        // Set the current Url from the url passed in
        if (location.pathname + location.search !== url){
            if (state.key !== 'listing')
                window.history.pushState(null, null, url);
            else
                window.history.replaceState(null, null, url);
        }
    },
    getCurrentUrl: function(){
        // Return the current Url
        return location.pathname + location.search;
    },
    // The following two functions are only used by the Navigation plugins
    getHref: function(url){
        // Return the Href for the url passed in
        return url;
    },
    getUrl: function(anchor){
        // Return the Url for the anchor passed in
        return anchor.pathname + anchor.search;
    }
};</code></pre>
        </div>
    </div>
    <script src="../../highlight.pack.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>
</body>
</html>