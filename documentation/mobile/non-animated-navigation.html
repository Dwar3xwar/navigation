<html>
<head>
    <title>Non-Animated Navigation</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="../../css/prism.css">
    <link rel="stylesheet" href="../../css/navigation.css">
</head>
<body>
    <div id="banner">
        <div>
            <a href="../../index.html">Navigation</a>
            <a href="../hello-world.html" class="selected">Docs</a>
            <a href="../../download/index.html">Download</a>
            <a id="github" href="https://github.com/grahammendick/navigation">GitHub source</a>
        </div>
    </div>
    <div id="content">
        <div id="menu">
            <a href="../hello-world.html">Hello World</a>
            <a href="../thinking-in-navigation.html">Thinking in Navigation</a>
            <div class="separator"></div>
            <h2>THE ABC</h2>
            <a href="../state-navigation.html">A. State Navigation</a>
            <a href="../navigation-data.html">B. Navigation Data</a>
            <a href="../routes.html">C. Routes</a>
            <a href="../email-example.html">Email Example</a>
            <div class="separator"></div>
            <h2>FURTHER GUIDES</h2>
            <a href="../current-data.html">Current Data</a>
            <a href="../html5-history.html">HTML5 History</a>
            <a href="../navigation-lifecycle.html">Navigation Lifecycle</a>
            <a href="../reusable-components.html">Reusable Components</a>
            <div class="separator"></div>
            <h2>MOBILE</h2>
            <a href="hello-world.html">Hello World</a>
            <a href="animated-navigation.html">Animated Navigation</a>
            <a href="non-animated-navigation.html" class="selected">Non-Animated Navigation</a>
            <a href="clean-urls.html">Clean Urls</a>
            <a href="shared-element-navigation.html">Shared Element Navigation</a>
            <a href="email-example.html">Email Example</a>
        </div>
        <div id="article">
            <h1>Non-Animated Navigation</h1>
            <h2>Removing Breadcrumbs</h2>
            <p>
                You don't always want a navigation to add a crumb to the breadcrumb trail because it triggers the animation cycle. If the user's filtering a list of items, for example, you don't want to animate out the unfiltered scene and animate in the filtered one. The user is filtering the list, not changing scenes. You could call <code>setState</code> inside the scene instead of navigating, but that wouldn't add to the browser history. The user expects that pressing the browser/mobile back button will return them to the unfiltered list.
            </p>
            <p>
                You can stop a crumb from making it onto the breadcrumb trail during a navigation. You attach a function to the <code>truncateCrumbTrail</code> property of the <code>State</code> you're navigating to. The Navigation router passes this function the proposed breadcrumb trail with the new crumb included and you return the truncated breadcrumb trail with the new crumb excluded.
            </p>
            <p>
                Returning to the email example, we add a <code>NavigationLink</code> to the 'mail' scene that expands the email thread so the user can read the full conversation. If we add a breadcrumb when it's clicked, there'll be a flicker as the unexpanded scene fades out and the expanded one fades in. We avoid this by truncating the breadcrumb trail when the user expands the email. We attach a <code>truncateCrumbTrail</code> function to the 'mail' <code>State</code> and check if the latest crumb matches the 'inbox' State. If it does then the user is opening an email and we leave the breadcrumb trail alone. If it doesn't then the user is expanding an email and we remove the latest crumb.
            </p>
            <pre><code class="language-jsx">stateNavigator.states.mail.truncateCrumbTrail = function(state, data, crumbs) {
  var latestCrumb = crumbs[crumbs.length - 1];
  return latestCrumb.state.key === 'inbox' ? crumbs : crumbs.slice(0, -1); 
};</code></pre>
        </div>
    </div>
    <script type="text/javascript" src="../../js/prism.js"></script>
</body>
</html>