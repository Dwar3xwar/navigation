<html>
<head>
    <title>Routes</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="prism.css">
    <link rel="stylesheet" href="navigation.css">
</head>
<body>
    <div id="banner">
        <div>
            <a href="index.html">Navigation</a>
            <a href="hello-world.html" class="selected">Docs</a>
            <a href="#">Download</a>
            <a id="github" href="#">GitHub source</a>
        </div>
    </div>
    <div id="content">
        <div id="menu">
            <a href="hello-world.html">Hello World</a>
            <div class="separator"></div>
            <a href="state-navigation.html">State Navigation</a>
            <a href="navigation-data.html">Navigation Data</a>
            <a href="routes.html" class="selected">Routes</a>
            <a href="breadcrumb-trail.html">Breadcrumb Trail</a>
            <a href="current-data.html">Current Data</a>
            <a href="navigation-lifecycle.html">Navigation Lifecycle</a>
            <a href="history.html">HTML5 History</a>
            <div class="separator"></div>
            <a href="tutorial.html">Tutorial</a>
        </div>
        <div id="article">
            <h1>Routes</h1>
            <h2>Tidying Up Urls</h2>
            <p>
                The Navigation router sees Urls as clothes draped over the body of your data, while other routers tattoo them into the skin. You can change clothes without impacting the body, but tattoos you can't. The Navigation router ships with a wrinkled wardrobe to get you started. You can iron out the creases once your appliction's running smoothly.
            </p>
            <p>
                Let's take the example of an email application. The scruffy Url the Navigation router generates for opening an email with an id of '12' is '/mail?id=121_0'. We'll smarten up the Url in three stages so that, by the end, it will read '/open/12'.
            </p>
            <pre><code class="language-jsx">&lt;NavigationReact.NavigationLink 
  stateKey="mail"
  navigationData={{id: 12}}
  stateNavigator={stateNavigator}>
  Open Mail
&lt;/NavigationReact.NavigationLink></code></pre>
            <h3>1. Configuring Routes</h3>
            <p>
                Because we've not supplied a route for the 'mail' State, the Navigation router uses the State's key instead. We'll change the Url from '/mail?id=121_0' to '/open?id=121_0' by setting the State's route property.
            </p>
            <pre><code class="language-jsx">var stateNavigator = new Navigation.StateNavigator([
  {key: 'inbox', route: ''},
  {key: 'mail', route: 'open'},
  {key: 'compose'}
]);</code></pre>
            <h3>2. Configuring Types</h3>
            <p>
                You'll recall that the Navigation router passes around typed data. By default it uses the Url to keep track of this type information. In the example Url the last three characters track that the id is a number. We'll remove these trailing characters, so that the Url reads '/open?id=12' instead of '/open?id=121_0', by assigning the id a default type of 'number'. The supported default types are 'string', 'number, 'boolean', 'date', 'stringarray', 'numberarray', booleanarray' and 'datearray'. 
            </p>
            <pre><code class="language-jsx">var stateNavigator = new Navigation.StateNavigator([
  {key: 'inbox', route: ''},
  {key: 'mail', route: 'open', defaultTypes: {id: 'number'}},
  {key: 'compose'}
]);</code></pre>
            <h3>3. Configuring Route Parameters</h3>
            <p>
                By default the Navigation router passes data in the query string. We'll iron out the final crease in the Url, changing it from '/open?id=12' to '/open/12', by specifying the id as a route parameter.
            </p>
            <pre><code class="language-jsx">var stateNavigator = new Navigation.StateNavigator([
  {key: 'inbox', route: ''},
  {key: 'mail', route: 'open/{id}', defaultTypes: {id: 'number'}},
  {key: 'compose'}
]);</code></pre>
            <h2>Handling Optional Data</h2>
            <p>
                Introduce expand, remind of the default value so don't always pass. It's optional data.
                Don't want to always pass a value, want the url to stay /open/12 when no expand passed
                or when passed as false, the default value. Only want a different Url when expand true.
            </p>
            <pre><code class="language-jsx">var stateNavigator = new Navigation.StateNavigator([
  {key: 'inbox', route: ''},
  {key: 'mail', route: 'open/{id}', defaultTypes: {id: 'number'}, defaults: {expand: false}},
  {key: 'compose'}
]);</code></pre>
            <p>
                By default it's passed in query string, what if want it as a route parameter.
                Can't just set the route to 'open/{id}/{expand}' because expand is mandatory so it won't match 
                open/12 when expand isn't provided. You can have the Url look however you want - there are three
                different ways for handling the optional data.
            </p>
            <table>
                <tr>
                    <th>Url</th>
                    <th>Route</th>
                </tr>
                <tr>
                    <td>'/open/12/true'</td>
                    <td>'open/{id}/{expanded?}'</td>
                </tr>
                <tr>
                    <td>'/open/12/history/true'</td>
                    <td>'open/{id}+/history/{expanded}'</td>
                </tr>
                <tr>
                    <td>'/true/history/12'</td>
                    <td>['open/{id}', '{expanded}/history/{id}']</td>
                </tr>
            </table>
            <p>
                Don't need to add a default type of 'boolean' because it's worked out from the default value.
            </p>
            <div class="Note">
                <h2>Note</h2>
                Add more text
                Don't have to set a default type for strings
                If your string values can contain underscores then set <code>trackTypes</code> to false on your State, e.g., <code>{key: 'mail', trackTypes: false}</code>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="prism.js"></script>
</body>
</html>